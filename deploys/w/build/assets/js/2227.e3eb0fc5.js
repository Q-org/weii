"use strict";(self.webpackChunkwei=self.webpackChunkwei||[]).push([[2227],{2458:(e,t,n)=>{var r=n(76401),i=n(30758),l="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?i.useLayoutEffect:i.useEffect;function o(e){return{initialValueFn:()=>e.isEditable(),subscribe:t=>e.registerEditableListener(t)}}e.exports=function(){return function(e){let[t]=r.useLexicalComposerContext(),n=i.useMemo((()=>e(t)),[t,e]),o=i.useRef(n.initialValueFn()),[s,a]=i.useState(o.current);return l((()=>{let{initialValueFn:e,subscribe:t}=n,r=e();return o.current!==r&&(o.current=r,a(r)),t((e=>{o.current=e,a(e)}))}),[n,e]),s}(o)}},3729:(e,t,n)=>{const r=n(73638);e.exports=r},8383:(e,t,n)=>{var r=n(75596);let i=new Map;function l(e){for(;null!=e;){if(e.nodeType===Node.TEXT_NODE)return e;e=e.firstChild}return null}function o(e){let t=e.parentNode;if(null==t)throw Error("Should never happen");return[t,Array.from(t.childNodes).indexOf(e)]}function s(e){let t={};e=e.split(";");for(let n of e)if(""!==n){let[e,r]=n.split(/:([^]+)/);e&&r&&(t[e.trim()]=r.trim())}return t}function a(e){let t=i.get(e);return void 0===t&&(t=s(e),i.set(e,t)),t}function u(e,t){var n=a("getStyle"in e?e.getStyle():e.style);n=function(e){let t="";for(let n in e)n&&(t+=`${n}: ${e[n]};`);return t}(t=Object.entries(t).reduce(((e,[t,n])=>(null===n?delete e[t]:e[t]=n,e)),{...n})),e.setStyle(n),i.set(n,t)}function d(e){for(;null!==e&&!r.$isRootOrShadowRoot(e);){let t=e.getLatest(),n=e.getParent();0===t.getChildrenSize()&&e.remove(!0),e=n}}function c(e,t,n,i,l=null){if(0!==t.length){var o=t[0],s=new Map,a=[];(o=r.$isElementNode(o)?o:o.getParentOrThrow()).isInline()&&(o=o.getParentOrThrow());for(var u=!1;null!==o;){var c=o.getPreviousSibling();if(null!==c){o=c,u=!0;break}if(o=o.getParentOrThrow(),r.$isRootOrShadowRoot(o))break}c=new Set;for(var f=0;f<n;f++){var g=t[f];r.$isElementNode(g)&&0===g.getChildrenSize()&&c.add(g.getKey())}var h=new Set;for(f=0;f<n;f++){var _=(g=t[f]).getParent();if(null!==_&&_.isInline()&&(_=_.getParent()),null!==_&&r.$isLeafNode(g)&&!h.has(g.getKey())){if(g=_.getKey(),void 0===s.get(g)){let e=i();e.setFormat(_.getFormatType()),e.setIndent(_.getIndent()),a.push(e),s.set(g,e),_.getChildren().forEach((t=>{e.append(t),h.add(t.getKey()),r.$isElementNode(t)&&t.getChildrenKeys().forEach((e=>h.add(e)))})),d(_)}}else if(c.has(g.getKey())){if(!r.$isElementNode(g))throw Error("Expected node in emptyElements to be an ElementNode");(_=i()).setFormat(g.getFormatType()),_.setIndent(g.getIndent()),a.push(_),g.remove(!0)}}if(null!==l)for(t=0;t<a.length;t++)l.append(a[t]);if(t=null,r.$isRootOrShadowRoot(o))if(u)if(null!==l)o.insertAfter(l);else for(l=a.length-1;0<=l;l--)o.insertAfter(a[l]);else if(u=o.getFirstChild(),r.$isElementNode(u)&&(o=u),null===u)if(l)o.append(l);else for(l=0;l<a.length;l++)u=a[l],o.append(u),t=u;else if(null!==l)u.insertBefore(l);else for(o=0;o<a.length;o++)l=a[o],u.insertBefore(l),t=l;else if(l)o.insertAfter(l);else for(l=a.length-1;0<=l;l--)u=a[l],o.insertAfter(u),t=u;a=r.$getPreviousSelection(),r.$isRangeSelection(a)&&a.anchor.getNode().isAttached()&&a.focus.getNode().isAttached()?r.$setSelection(a.clone()):null!==t?t.selectEnd():e.dirty=!0}}function f(e,t,n,r){e.modify(t?"extend":"move",n,r)}function g(e){return e=e.anchor.getNode(),"rtl"===(r.$isRootNode(e)?e:e.getParentOrThrow()).getDirection()}function h(e){if(r.$isDecoratorNode(e)&&!e.isInline())return!0;if(!r.$isElementNode(e)||r.$isRootOrShadowRoot(e))return!1;var t=e.getFirstChild();return t=null===t||r.$isLineBreakNode(t)||r.$isTextNode(t)||t.isInline(),!e.isInline()&&!1!==e.canBeEmpty()&&t}t.$addNodeStyle=function(e){let t=s(e=e.getStyle());i.set(e,t)},t.$cloneWithProperties=function(e){let t=e.constructor.clone(e);return t.__parent=e.__parent,t.__next=e.__next,t.__prev=e.__prev,r.$isElementNode(e)&&r.$isElementNode(t)?(t.__first=e.__first,t.__last=e.__last,t.__size=e.__size,t.__format=e.__format,t.__indent=e.__indent,t.__dir=e.__dir,t):(r.$isTextNode(e)&&r.$isTextNode(t)&&(t.__format=e.__format,t.__style=e.__style,t.__mode=e.__mode,t.__detail=e.__detail),t)},t.$getSelectionStyleValueForProperty=function(e,t,n=""){let i=null,l=e.getNodes();var o=e.anchor,s=e.focus,u=e.isBackward();let d=u?s.offset:o.offset;if(o=u?s.getNode():o.getNode(),e.isCollapsed()&&""!==e.style&&(null!==(e=a(e.style))&&t in e))return e[t];for(e=0;e<l.length;e++){var c=l[e];if((0===e||0!==d||!c.is(o))&&r.$isTextNode(c))if(s=t,u=n,s=null!==(c=a(c=c.getStyle()))&&c[s]||u,null===i)i=s;else if(i!==s){i="";break}}return null===i?n:i},t.$isAtNodeEnd=function(e){if("text"===e.type)return e.offset===e.getNode().getTextContentSize();let t=e.getNode();if(!r.$isElementNode(t))throw Error("isAtNodeEnd: node must be a TextNode or ElementNode");return e.offset===t.getChildrenSize()},t.$isParentElementRTL=g,t.$moveCaretSelection=f,t.$moveCharacter=function(e,t,n){let r=g(e);f(e,t,n?!r:r,"character")},t.$patchStyleText=function e(t,n){var i=t.getNodes(),l=i.length;if(r.$isRangeSelection(t)){--l;var o=i[0],s=i[l];if(t.isCollapsed()&&r.$isRangeSelection(t))u(t,n);else{var a=t.anchor,d=t.focus,c=o.getTextContent().length,f=d.offset,g=a.offset,h=a.isBefore(d),_=h?g:f;t=h?f:g;var p=h?a.type:d.type,m=h?d.type:a.type;if(d=h?d.key:a.key,r.$isTextNode(o)&&_===c&&(h=o.getNextSibling(),r.$isTextNode(h)&&(_=g=0,o=h)),1===i.length)r.$isTextNode(o)&&((_="element"===p?0:g>f?f:g)!==(t="element"===m?c:g>f?g:f)&&(0===_&&t===c?(u(o,n),o.select(_,t)):(i=o.splitText(_,t),u(i=0===_?i[0]:i[1],n),i.select(0,t-_))));else for(r.$isTextNode(o)&&_<o.getTextContentSize()&&(0!==_&&(o=o.splitText(_)[1],_=0,a.set(o.getKey(),_,"text")),u(o,n)),r.$isTextNode(s)&&(_=s.getTextContent().length,s.__key!==d&&0!==t&&(t=_),t!==_&&([s]=s.splitText(t)),0!==t&&u(s,n)),t=1;t<l;t++)a=(_=i[t]).getKey(),r.$isTextNode(_)&&a!==o.getKey()&&a!==s.getKey()&&!_.isToken()&&u(_,n)}}else{for(s=(o=r.$createRangeSelection()).anchor,_=o.focus,a=0;a<l;a++)c=i[a],r.DEPRECATED_$isGridCellNode(c)&&(s.set(c.getKey(),0,"element"),_.set(c.getKey(),c.getChildrenSize(),"element"),e(r.$normalizeSelection__EXPERIMENTAL(o),n));r.$setSelection(t)}},t.$selectAll=function(e){let t=e.anchor;e=e.focus;var n=t.getNode().getTopLevelElementOrThrow().getParentOrThrow();let i=n.getFirstDescendant();n=n.getLastDescendant();let l="element",o="element",s=0;r.$isTextNode(i)?l="text":r.$isElementNode(i)||null===i||(i=i.getParentOrThrow()),r.$isTextNode(n)?(o="text",s=n.getTextContentSize()):r.$isElementNode(n)||null===n||(n=n.getParentOrThrow()),i&&n&&(t.set(i.getKey(),0,l),e.set(n.getKey(),s,o))},t.$setBlocksType=function(e,t){if("root"===e.anchor.key){t=t();var n=r.$getRoot();(e=n.getFirstChild())?e.replace(t,!0):n.append(t)}else{for(n=e.getNodes(),e=e.anchor.getNode();null!==e&&null!==e.getParent()&&!h(e);)e=e.getParentOrThrow();for((e=h(e)?e:null)&&-1===n.indexOf(e)&&n.push(e),e=0;e<n.length;e++){let i=n[e];if(!h(i))continue;if(!r.$isElementNode(i))throw Error("Expected block node to be an ElementNode");let l=t();l.setFormat(i.getFormatType()),l.setIndent(i.getIndent()),i.replace(l,!0)}}},t.$shouldOverrideDefaultCharacterSelection=function(e,t){return e=r.$getAdjacentNode(e.focus,t),r.$isDecoratorNode(e)&&!e.isIsolated()||r.$isElementNode(e)&&!e.isInline()&&!e.canBeEmpty()},t.$sliceSelectedTextNodeContent=function(e,t){if(t.isSelected(e)&&!t.isSegmented()&&!t.isToken()&&r.$INTERNAL_isPointSelection(e)){var n=e.anchor.getNode(),i=e.focus.getNode(),l=t.is(n),o=t.is(i);if(l||o){l=e.isBackward();let r,[s,a]=e.getCharacterOffsets();e=n.is(i),o=t.is(l?i:n),i=t.is(l?n:i),n=0,e?(n=s>a?a:s,r=s>a?s:a):o?(n=l?a:s,r=void 0):i&&(n=0,r=l=l?s:a),t.__text=t.__text.slice(n,r)}}return t},t.$wrapNodes=function(e,t,n=null){var i=e.getNodes();let l=i.length;var o=e.anchor;if(0===l||1===l&&"element"===o.type&&0===o.getNode().getChildrenSize()){i=(e="text"===o.type?o.getNode().getParentOrThrow():o.getNode()).getChildren();let r=t();r.setFormat(e.getFormatType()),r.setIndent(e.getIndent()),i.forEach((e=>r.append(e))),n&&(r=n.append(r)),e.replace(r)}else{o=null;var s=[];for(let a=0;a<l;a++){let l=i[a];r.$isRootOrShadowRoot(l)?(c(e,s,s.length,t,n),s=[],o=l):null===o||null!==o&&r.$hasAncestor(l,o)?s.push(l):(c(e,s,s.length,t,n),s=[l])}c(e,s,s.length,t,n)}},t.createDOMRange=function(e,t,n,i,s){let a=t.getKey(),u=i.getKey(),d=document.createRange(),c=e.getElementByKey(a);if(e=e.getElementByKey(u),r.$isTextNode(t)&&(c=l(c)),r.$isTextNode(i)&&(e=l(e)),void 0===t||void 0===i||null===c||null===e)return null;"BR"===c.nodeName&&([c,n]=o(c)),"BR"===e.nodeName&&([e,s]=o(e)),t=c.firstChild,c===e&&null!=t&&"BR"===t.nodeName&&0===n&&0===s&&(s=1);try{d.setStart(c,n),d.setEnd(e,s)}catch(f){return null}return!d.collapsed||n===s&&a===u||(d.setStart(e,s),d.setEnd(c,n)),d},t.createRectsFromDOMRange=function(e,t){var n=e.getRootElement();if(null===n)return[];e=n.getBoundingClientRect(),n=getComputedStyle(n),n=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight);let r,i=(t=Array.from(t.getClientRects())).length;t.sort(((e,t)=>{let n=e.top-t.top;return 3>=Math.abs(n)?e.left-t.left:n}));for(let l=0;l<i;l++){let o=t[l],s=o.width+n===e.width;r&&r.top<=o.top&&r.top+r.height>o.top&&r.left+r.width>o.left||s?(t.splice(l--,1),i--):r=o}return t},t.getStyleObjectFromCSS=a,t.trimTextContentFromAnchor=function(e,t,n){let i=t.getNode();if(r.$isElementNode(i)){var l=i.getDescendantByIndex(t.offset);null!==l&&(i=l)}for(;0<n&&null!==i;){r.$isElementNode(i)&&(null!==(l=i.getLastDescendant())&&(i=l));var o=i.getPreviousSibling(),s=0;if(null===o){for(var a=(l=i.getParentOrThrow()).getPreviousSibling();null===a;){if(null===(l=l.getParent())){o=null;break}a=l.getPreviousSibling()}null!==l&&(s=l.isInline()?0:2,o=a)}if(""===(a=i.getTextContent())&&r.$isElementNode(i)&&!i.isInline()&&(a="\n\n"),l=a.length,!r.$isTextNode(i)||n>=l)a=i.getParent(),i.remove(),null==a||0!==a.getChildrenSize()||r.$isRootNode(a)||a.remove(),n-=l+s,i=o;else{let u=i.getKey();s=e.getEditorState().read((()=>{const e=r.$getNodeByKey(u);return r.$isTextNode(e)&&e.isSimpleText()?e.getTextContent():null})),o=l-n;let d=a.slice(0,o);null!==s&&s!==a?(n=r.$getPreviousSelection(),l=i,i.isSimpleText()?i.setTextContent(s):(l=r.$createTextNode(s),i.replace(l)),r.$isRangeSelection(n)&&n.isCollapsed()&&(n=n.anchor.offset,l.select(n,n))):i.isSimpleText()?(s=t.key===u,(a=t.offset)<n&&(a=l),n=s?a-n:0,l=s?a:o,s&&0===n?([n]=i.splitText(n,l),n.remove()):([,n]=i.splitText(n,l),n.remove())):(n=r.$createTextNode(d),i.replace(n)),n=0}}}},17674:(e,t,n)=>{var r=n(38710),i=n(75596);function l(...e){return()=>{e.forEach((e=>e()))}}let o={attributes:!0,characterData:!0,childList:!0,subtree:!0};function s(e,t,n){function i(){if(null===s)throw Error("Unexpected null rootDOMNode");if(null===a)throw Error("Unexpected null parentDOMNode");let{left:i,top:l}=s.getBoundingClientRect();var o=a;let u=r.createRectsFromDOMRange(e,t);c.isConnected||o.append(c),o=!1;for(let e=0;e<u.length;e++){var f=u[e];let t=d[e]||document.createElement("div"),n=t.style;"absolute"!==n.position&&(n.position="absolute",o=!0);var g=f.left-i+"px";n.left!==g&&(n.left=g,o=!0),g=f.top-l+"px",n.top!==g&&(t.style.top=g,o=!0),g=`${f.width}px`,n.width!==g&&(t.style.width=g,o=!0),f=`${f.height}px`,n.height!==f&&(t.style.height=f,o=!0),t.parentNode!==c&&(c.append(t),o=!0),d[e]=t}for(;d.length>u.length;)d.pop();o&&n(d)}function l(){s=a=null,null!==u&&u.disconnect(),u=null,c.remove();for(let e of d)e.remove();d=[]}let s=null,a=null,u=null,d=[],c=document.createElement("div"),f=e.registerRootListener((function t(){let n=e.getRootElement();if(null===n)return l();let r=n.parentElement;if(!(r instanceof HTMLElement))return l();l(),s=n,a=r,u=new MutationObserver((n=>{let r=e.getRootElement(),l=r&&r.parentElement;if(r!==s||l!==a)return t();for(let e of n)if(!c.contains(e.target))return i()})),u.observe(r,o),i()}));return()=>{f(),l()}}function a(e,t){for(let n of t)if(e.type.startsWith(n))return!0;return!1}let u=(e,t)=>{for(;e!==i.$getRoot()&&null!=e;){if(t(e))return e;e=e.getParent()}return null};t.$splitNode=i.$splitNode,t.isHTMLAnchorElement=i.isHTMLAnchorElement,t.isHTMLElement=i.isHTMLElement,t.$dfs=function(e,t){let n=[];e=(e||i.$getRoot()).getLatest(),t=t||(i.$isElementNode(e)?e.getLastDescendant():e);for(var r=e,l=0;null!==(r=r.getParent());)l++;for(r=l;null!==e&&!e.is(t);)if(n.push({depth:r,node:e}),i.$isElementNode(e)&&0<e.getChildrenSize())e=e.getFirstChild(),r++;else for(l=null;null===l&&null!==e;)null===(l=e.getNextSibling())?(e=e.getParent(),r--):e=l;return null!==e&&e.is(t)&&n.push({depth:r,node:e}),n},t.$filter=function(e,t){let n=[];for(let r=0;r<e.length;r++){let i=t(e[r]);null!==i&&n.push(i)}return n},t.$findMatchingParent=u,t.$getNearestBlockElementAncestorOrThrow=function(e){let t=u(e,(e=>i.$isElementNode(e)&&!e.isInline()));return i.$isElementNode(t)||function(e){let t=new URLSearchParams;t.append("code",e);for(let n=1;n<arguments.length;n++)t.append("v",arguments[n]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(4,e.__key),t},t.$getNearestNodeOfType=function(e,t){for(;null!=e;){if(e instanceof t)return e;e=e.getParent()}return null},t.$insertFirst=function(e,t){let n=e.getFirstChild();null!==n?n.insertBefore(t):e.append(t)},t.$insertNodeToNearestRoot=function(e){var t=i.$getSelection()||i.$getPreviousSelection();if(i.$isRangeSelection(t)){var{focus:n}=t;if(t=n.getNode(),n=n.offset,i.$isRootOrShadowRoot(t))null==(n=t.getChildAtIndex(n))?t.append(e):n.insertBefore(e),e.selectNext();else{let r,l;i.$isTextNode(t)?(r=t.getParentOrThrow(),l=t.getIndexWithinParent(),0<n&&(l+=1,t.splitText(n))):(r=t,l=n),[,t]=i.$splitNode(r,l),t.insertBefore(e),t.selectStart()}}else null!=t?(t=t.getNodes())[t.length-1].getTopLevelElementOrThrow().insertAfter(e):i.$getRoot().append(e),t=i.$createParagraphNode(),e.insertAfter(t),t.select();return e.getLatest()},t.$restoreEditorState=function(e,t){let n=new Map,l=e._pendingEditorState;for(let[o,s]of t._nodeMap){let e=r.$cloneWithProperties(s);if(i.$isTextNode(e)){if(!i.$isTextNode(s))throw Error("Expected node be a TextNode");e.__text=s.__text}n.set(o,e)}l&&(l._nodeMap=n),e._dirtyType=2,e=t._selection,i.$setSelection(null===e?null:e.clone())},t.$wrapNodeInElement=function(e,t){return t=t(),e.replace(t),t.append(e),t},t.addClassNamesToElement=function(e,...t){t.forEach((t=>{"string"==typeof t&&(t=t.split(" ").filter((e=>""!==e)),e.classList.add(...t))}))},t.isMimeType=a,t.markSelection=function(e,t){function n(n){n.read((()=>{var n=i.$getSelection();if(i.$isRangeSelection(n)){var{anchor:l,focus:c}=n,f=(n=l.getNode()).getKey(),g=l.offset,h=c.getNode(),_=h.getKey(),p=c.offset,m=e.getElementByKey(f),y=e.getElementByKey(_);if(f=null===r||null===m||g!==o||f!==r.getKey()||n!==r&&(!(r instanceof i.TextNode)||n.updateDOM(r,m,e._config)),_=null===a||null===y||p!==u||_!==a.getKey()||h!==a&&(!(a instanceof i.TextNode)||h.updateDOM(a,y,e._config)),f||_){m=e.getElementByKey(l.getNode().getKey());var v=e.getElementByKey(c.getNode().getKey());if(null!==m&&null!==v&&"SPAN"===m.tagName&&"SPAN"===v.tagName){if(_=document.createRange(),c.isBefore(l)?(f=v,y=c.offset,v=m,m=l.offset):(f=m,y=l.offset,m=c.offset),null===(f=f.firstChild))throw Error("Expected text node to be first child of span");if(null===(v=v.firstChild))throw Error("Expected text node to be first child of span");_.setStart(f,y),_.setEnd(v,m),d(),d=s(e,_,(e=>{for(let t of e){let e=t.style;"Highlight"!==e.background&&(e.background="Highlight"),"HighlightText"!==e.color&&(e.color="HighlightText"),"-1"!==e.zIndex&&(e.zIndex="-1"),"none"!==e.pointerEvents&&(e.pointerEvents="none"),"-1.5px"!==e.marginTop&&(e.marginTop="-1.5px"),"4px"!==e.paddingTop&&(e.paddingTop="4px"),"0px"!==e.paddingBottom&&(e.paddingBottom="0px")}void 0!==t&&t(e)}))}}r=n,o=g,a=h,u=p}else u=a=o=r=null,d(),d=()=>{}}))}let r=null,o=null,a=null,u=null,d=()=>{};return n(e.getEditorState()),l(e.registerUpdateListener((({editorState:e})=>n(e))),d,(()=>{d()}))},t.mediaFileReader=function(e,t){let n=e[Symbol.iterator]();return new Promise(((e,r)=>{let i=[],l=()=>{const{done:o,value:s}=n.next();if(o)return e(i);const u=new FileReader;u.addEventListener("error",r),u.addEventListener("load",(()=>{const e=u.result;"string"==typeof e&&i.push({file:s,result:e}),l()})),a(s,t)?u.readAsDataURL(s):l()};l()}))},t.mergeRegister=l,t.objectKlassEquals=function(e,t){return null!==e&&Object.getPrototypeOf(e).constructor.name===t.name},t.positionNodeOnRange=s,t.registerNestedElementResolver=function(e,t,n,r){return e.registerNodeTransform(t,(e=>{e:{for(var i=e.getChildren(),l=0;l<i.length;l++)if(i[l]instanceof t){i=null;break e}for(i=e;null!==i;)if(l=i,(i=i.getParent())instanceof t){i={child:l,parent:i};break e}i=null}if(null!==i){const{child:t,parent:o}=i;if(t.is(e)){if(r(o,e),i=(e=t.getNextSiblings()).length,o.insertAfter(t),0!==i){l=n(o),t.insertAfter(l);for(let t=0;t<i;t++)l.append(e[t])}o.canBeEmpty()||0!==o.getChildrenSize()||o.remove()}}}))},t.removeClassNamesFromElement=function(e,...t){t.forEach((t=>{"string"==typeof t&&e.classList.remove(...t.split(" "))}))}},17685:(e,t,n)=>{const r=n(50810);e.exports=r},19277:(e,t)=>{let n={},r={},i={},l={},o={},s={},a={},u={},d={},c={},f={},g={},h={},_={},p={},m={},y={},v={},x={},C={},N={},T={},E={},S={},b={},O={},w={},D={},k={},M={},R={},A={},P={},$={},I={},L={};function F(e){let t=new URLSearchParams;t.append("code",e);for(let n=1;n<arguments.length;n++)t.append("v",arguments[n]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}let B="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,z=B&&"documentMode"in document?document.documentMode:null,W=B&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),K=B&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Y=!(!B||!("InputEvent"in window)||z)&&"getTargetRanges"in new window.InputEvent("input"),H=B&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),U=B&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,J=B&&/Android/.test(navigator.userAgent),V=B&&/^(?=.*Chrome).*/i.test(navigator.userAgent),j=B&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!V,G=H||U||j?"\xa0":"\u200b",q=K?"\xa0":G,X=/^[^A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02b8\u0300-\u0590\u0800-\u1fff\u200e\u2c00-\ufb1c\ufe00-\ufe6f\ufefd-\uffff]*[\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc]/,Q=/^[^\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc]*[A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02b8\u0300-\u0590\u0800-\u1fff\u200e\u2c00-\ufb1c\ufe00-\ufe6f\ufefd-\uffff]/,Z={bold:1,code:16,highlight:128,italic:2,strikethrough:4,subscript:32,superscript:64,underline:8},ee={directionless:1,unmergeable:2},te={center:2,end:6,justify:4,left:1,right:3,start:5},ne={2:"center",6:"end",4:"justify",1:"left",3:"right",5:"start"},re={normal:0,segmented:2,token:1},ie={0:"normal",2:"segmented",1:"token"},le=!1,oe=0;function se(e){oe=e.timeStamp}function ae(e,t,n){return t.__lexicalLineBreak===e||void 0!==e[`__lexicalKey_${n._key}`]}function ue(e,t,n){le=!0;let r=100<performance.now()-oe;try{kr(e,(()=>{let i=rr()||function(e){return e.getEditorState().read((()=>{let e=rr();return null!==e?e.clone():null}))}(e);var l=new Map,o=e.getRootElement(),s=e._editorState,a=e._blockCursorElement;let u=!1,d="";for(var c=0;c<t.length;c++){var f=t[c],g=f.type,h=f.target,_=Re(h,s);if(!(null===_&&h!==o||Rr(_)))if("characterData"===g){if(f=r&&Mn(_))e:{g=h;var p=_;if(Yn(f=i)){var m=f.anchor.getNode();if(m.is(p)&&f.format!==m.getFormat()){f=!1;break e}}f=3===g.nodeType&&p.isAttached()}f&&(g=f=null,null!==(p=ot(e._window))&&p.anchorNode===h&&(f=p.anchorOffset,g=p.focusOffset),null!==(h=h.nodeValue)&&Ke(_,h,f,g,!1))}else if("childList"===g){for(u=!0,g=f.addedNodes,p=0;p<g.length;p++){var y=Me(m=g[p]),v=m.parentNode;null==v||m===a||null!==y||"BR"===m.nodeName&&ae(m,v,e)||(K&&(y=m.innerText||m.nodeValue)&&(d+=y),v.removeChild(m))}if(0<(g=(f=f.removedNodes).length)){for(p=0,m=0;m<g;m++)("BR"===(v=f[m]).nodeName&&ae(v,h,e)||a===v)&&(h.appendChild(v),p++);g!==p&&(h===o&&(_=s._nodeMap.get("root")),l.set(h,_))}}}if(0<l.size)for(let[t,n]of l)if(Pr(n))for(l=n.getChildrenKeys(),o=t.firstChild,s=0;s<l.length;s++)null!==(a=e.getElementByKey(l[s]))&&(null==o?(t.appendChild(a),o=a):o!==a&&t.replaceChild(a,o),o=o.nextSibling);else Mn(n)&&n.markDirty();if(0<(l=n.takeRecords()).length){for(o=0;o<l.length;o++)for(s=(a=l[o]).addedNodes,a=a.target,c=0;c<s.length;c++)null==(h=(_=s[c]).parentNode)||"BR"!==_.nodeName||ae(_,a,e)||h.removeChild(_);n.takeRecords()}null!==i&&(u&&(i.dirty=!0,Ie(i)),K&&Ve(e)&&i.insertRawText(d))}))}finally{le=!1}}function de(e){let t=e._observer;if(null!==t){ue(e,t.takeRecords(),t)}}function ce(e){0===oe&&Qe(e).addEventListener("textInput",se,!0),e._observer=new MutationObserver(((t,n)=>{ue(e,t,n)}))}function fe(e,t){let n=e.__mode,r=e.__format;e=e.__style;let i=t.__mode,l=t.__format;return t=t.__style,!(null!==n&&n!==i||null!==r&&r!==l||null!==e&&e!==t)}function ge(e,t){let n=e.mergeWithSibling(t),r=Cr()._normalizedNodes;return r.add(e.__key),r.add(t.__key),n}function he(e){if(""===e.__text&&e.isSimpleText()&&!e.isUnmergeable())e.remove();else{for(var t;null!==(t=e.getPreviousSibling())&&Mn(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(""!==t.__text){fe(t,e)&&(e=ge(t,e));break}t.remove()}for(var n;null!==(n=e.getNextSibling())&&Mn(n)&&n.isSimpleText()&&!n.isUnmergeable();){if(""!==n.__text){fe(e,n)&&ge(e,n);break}n.remove()}}}function _e(e){return pe(e.anchor),pe(e.focus),e}function pe(e){for(;"element"===e.type;){var t=e.getNode(),n=e.offset;if(n===t.getChildrenSize()?(t=t.getChildAtIndex(n-1),n=!0):(t=t.getChildAtIndex(n),n=!1),Mn(t)){e.set(t.__key,n?t.getTextContentSize():0,"text");break}if(!Pr(t))break;e.set(t.__key,n?t.getChildrenSize():0,"element")}}let me=1,ye="function"==typeof queueMicrotask?queueMicrotask:e=>{Promise.resolve().then(e)};function ve(e){let t=document.activeElement;if(null===t)return!1;let n=t.nodeName;return Rr(Re(e))&&("INPUT"===n||"TEXTAREA"===n||"true"===t.contentEditable&&null==t.__lexicalEditor)}function xe(e,t,n){let r=e.getRootElement();try{return null!==r&&r.contains(t)&&r.contains(n)&&null!==t&&!ve(t)&&Ce(t)===e}catch(i){return!1}}function Ce(e){for(;null!=e;){let t=e.__lexicalEditor;if(null!=t)return t;e=qe(e)}return null}function Ne(e){return e.isToken()||e.isSegmented()}function Te(e){for(;null!=e;){if(3===e.nodeType)return e;e=e.firstChild}return null}function Ee(e,t,n){let r=Z[t];return null!==n&&(e&r)==(n&r)||(e^=r,"subscript"===t?e&=~Z.superscript:"superscript"===t&&(e&=~Z.subscript)),e}function Se(e,t){if(null!=t)e.__key=t;else{vr(),99<pr&&F(14),t=Cr();var n=xr(),r=""+me++;n._nodeMap.set(r,e),Pr(e)?t._dirtyElements.set(r,!0):t._dirtyLeaves.add(r),t._cloneNotNeeded.add(r),t._dirtyType=1,e.__key=r}}function be(e){var t=e.getParent();if(null!==t){let i=e.getWritable();t=t.getWritable();var n=e.getPreviousSibling();if(e=e.getNextSibling(),null===n)if(null!==e){var r=e.getWritable();t.__first=e.__key,r.__prev=null}else t.__first=null;else{if(r=n.getWritable(),null!==e){let t=e.getWritable();t.__prev=r.__key,r.__next=t.__key}else r.__next=null;i.__prev=null}null===e?null!==n?(e=n.getWritable(),t.__last=n.__key,e.__next=null):t.__last=null:(e=e.getWritable(),null!==n?((n=n.getWritable()).__next=e.__key,e.__prev=n.__key):e.__prev=null,i.__next=null),t.__size--,i.__parent=null}}function Oe(e){99<pr&&F(14);var t=e.getLatest(),n=t.__parent,r=xr();let i=Cr(),l=r._nodeMap;if(r=i._dirtyElements,null!==n)e:for(;null!==n&&!r.has(n);){let e=l.get(n);if(void 0===e)break;r.set(n,!1),n=e.__parent}t=t.__key,i._dirtyType=1,Pr(e)?r.set(t,!0):i._dirtyLeaves.add(t)}function we(e){vr();var t=Cr();let n=t._compositionKey;e!==n&&(t._compositionKey=e,null!==n&&(null!==(t=ke(n))&&t.getWritable()),null!==e&&(null!==(e=ke(e))&&e.getWritable()))}function De(){return yr()?null:Cr()._compositionKey}function ke(e,t){return void 0===(e=(t||xr())._nodeMap.get(e))?null:e}function Me(e,t){return void 0!==(e=e[`__lexicalKey_${Cr()._key}`])?ke(e,t):null}function Re(e,t){for(;null!=e;){let n=Me(e,t);if(null!==n)return n;e=qe(e)}return null}function Ae(e){let t=Object.assign({},e._decorators);return e._pendingDecorators=t}function Pe(e){return e.read((()=>$e().getTextContent()))}function $e(){return xr()._nodeMap.get("root")}function Ie(e){vr();let t=xr();null!==e&&(e.dirty=!0,e.setCachedNodes(null)),t._selection=e}function Le(e){var t,n=Cr();e:{for(t=e;null!=t;){let e=t[`__lexicalKey_${n._key}`];if(void 0!==e){t=e;break e}t=qe(t)}t=null}return null===t?e===(n=n.getRootElement())?ke("root"):null:ke(t)}function Fe(e){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e)}function Be(e){let t=[];for(;null!==e;)t.push(e),e=e._parentEditor;return t}function ze(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)}function We(e,t,n){if(null!==(t=ot(t._window))){var r=t.anchorNode,{anchorOffset:i,focusOffset:l}=t;if(null!==r&&(t=3===r.nodeType?r.nodeValue:null,r=Re(r),null!==t&&Mn(r))){if(t===G&&n){t=n,l=i=n.length}null!==t&&Ke(r,t,i,l,e)}}}function Ke(e,t,n,r,i){let l=e;if(l.isAttached()&&(i||!l.isDirty())){let u=l.isComposing(),d=t;if((u||i)&&t[t.length-1]===G&&(d=t.slice(0,-1)),t=l.getTextContent(),i||d!==t)if(""===d)if(we(null),H||U||j)l.remove();else{let e=Cr();setTimeout((()=>{e.update((()=>{l.isAttached()&&l.remove()}))}),20)}else{i=l.getParent(),t=ir();var o=l.getTextContentSize(),s=De(),a=l.getKey();l.isToken()||null!==s&&a===s&&!u||Yn(t)&&(null!==i&&!i.canInsertTextBefore()&&0===t.anchor.offset||t.anchor.key===e.__key&&0===t.anchor.offset&&!l.canInsertTextBefore()&&!u||t.focus.key===e.__key&&t.focus.offset===o&&!l.canInsertTextAfter()&&!u)?l.markDirty():(Yn(e=rr())&&null!==n&&null!==r&&(e.setTextNodeRange(l,n,l,r),l.isSegmented()&&(n=kn(n=l.getTextContent()),l.replace(n),l=n)),l.setTextContent(d))}}}function Ye(e,t){void 0===e.__lexicalClassNameCache&&(e.__lexicalClassNameCache={});let n=e.__lexicalClassNameCache,r=n[t];return void 0!==r?r:"string"==typeof(e=e[t])?(e=e.split(" "),n[t]=e):e}function He(e,t,n,r,i){0!==n.size&&(n=r.__type,r=r.__key,void 0===(t=t.get(n))&&F(33,n),n=t.klass,void 0===(t=e.get(n))&&(t=new Map,e.set(n,t)),n="destroyed"===(e=t.get(r))&&"created"===i,(void 0===e||n)&&t.set(r,n?"updated":i))}function Ue(e,t,n){let r=e.getParent(),i=n;return null!==r&&(t&&0===n?(i=e.getIndexWithinParent(),e=r):t||n!==e.getChildrenSize()||(i=e.getIndexWithinParent()+1,e=r)),e.getChildAtIndex(t?i-1:i)}function Je(e,t){var n=e.offset;return"element"===e.type?Ue(e=e.getNode(),t,n):(e=e.getNode(),t&&0===n||!t&&n===e.getTextContentSize()?null===(n=t?e.getPreviousSibling():e.getNextSibling())?Ue(e.getParentOrThrow(),t,e.getIndexWithinParent()+(t?0:1)):n:null)}function Ve(e){return"insertFromPaste"===(e=(e=Qe(e).event)&&e.inputType)||"insertFromPasteAsQuotation"===e}function je(e){return!Lr(e)&&!e.isLastChild()&&!e.isInline()}function Ge(e,t){return void 0===(e=e._keyToDOMMap.get(t))&&F(75,t),e}function qe(e){return null!==(e=e.assignedSlot||e.parentElement)&&11===e.nodeType?e.host:e}function Xe(e,t){for(e=e.getParent();null!==e;){if(e.is(t))return!0;e=e.getParent()}return!1}function Qe(e){return null===(e=e._window)&&F(78),e}function Ze(e){for(e=e.getParentOrThrow();null!==e&&!et(e);)e=e.getParentOrThrow();return e}function et(e){return Lr(e)||Pr(e)&&e.isShadowRoot()}function tt(e){return Se(e=e.constructor.clone(e),null),e}function nt(e){var t=Cr();let n=e.constructor.getType();return void 0===(t=t._nodes.get(n))&&F(97),null!==(t=t.replace)?((t=t(e))instanceof e.constructor||F(98),t):e}function rt(e,t){!Lr(e=e.getParent())||Pr(t)||Rr(t)||F(99)}function it(e){return(Rr(e)||Pr(e)&&!e.canBeEmpty())&&!e.isInline()}function lt(e,t,n){n.style.removeProperty("caret-color"),t._blockCursorElement=null,null!==(t=e.parentElement)&&t.removeChild(e)}function ot(e){return B?(e||window).getSelection():null}function st(e,t){for(;e!==$e()&&null!=e;){if(t(e))return e;e=e.getParent()}return null}function at(e){return 1===e.nodeType}function ut(e){if(Rr(e)&&!e.isInline())return!0;if(!Pr(e)||et(e))return!1;var t=e.getFirstChild();return t=null===t||_n(t)||Mn(t)||t.isInline(),!e.isInline()&&!1!==e.canBeEmpty()&&t}function dt(e,t){for(;null!==e&&null!==e.getParent()&&!t(e);)e=e.getParentOrThrow();return t(e)?e:null}function ct(e,t,n,r,i,l){for(e=e.getFirstChild();null!==e;){let o=e.__key;e.__parent===t&&(Pr(e)&&ct(e,o,n,r,i,l),n.has(o)||l.delete(o),i.push(o)),e=e.getNextSibling()}}let ft,gt,ht,_t,pt,mt,yt,vt,xt,Ct,Nt="",Tt="",Et="",St=!1,bt=!1,Ot=null;function wt(e,t){let n=yt.get(e);if(null!==t){let n=Kt(e);n.parentNode===t&&t.removeChild(n)}vt.has(e)||gt._keyToDOMMap.delete(e),Pr(n)&&Dt(e=Ft(n,yt),0,e.length-1,null),void 0!==n&&He(Ct,ht,_t,n,"destroyed")}function Dt(e,t,n,r){for(;t<=n;++t){let n=e[t];void 0!==n&&wt(n,r)}}function kt(e,t){e.setProperty("text-align",t)}function Mt(e,t){var n=ft.theme.indent;if("string"==typeof n){let r=e.classList.contains(n);0<t&&!r?e.classList.add(n):1>t&&r&&e.classList.remove(n)}n=getComputedStyle(e).getPropertyValue("--lexical-indent-base-value")||"40px",e.style.setProperty("padding-inline-start",0===t?"":`calc(${t} * ${n})`)}function Rt(e,t){e=e.style,0===t?kt(e,""):1===t?kt(e,"left"):2===t?kt(e,"center"):3===t?kt(e,"right"):4===t?kt(e,"justify"):5===t?kt(e,"start"):6===t&&kt(e,"end")}function At(e,t,n){let r=vt.get(e);void 0===r&&F(60);let i=r.createDOM(ft,gt);var l=gt._keyToDOMMap;if(i["__lexicalKey_"+gt._key]=e,l.set(e,i),Mn(r)?i.setAttribute("data-lexical-text","true"):Rr(r)&&i.setAttribute("data-lexical-decorator","true"),Pr(r)){if(e=r.__indent,l=r.__size,0!==e&&Mt(i,e),0!==l){--l,e=Ft(r,vt);var o=Tt;Tt="",Pt(e,r,0,l,i,null),Lt(r,i),Tt=o}0!==(e=r.__format)&&Rt(i,e),r.isInline()||It(null,r,i),je(r)&&(Nt+="\n\n",Et+="\n\n")}else l=r.getTextContent(),Rr(r)?(null!==(o=r.decorate(gt,ft))&&zt(e,o),i.contentEditable="false"):Mn(r)&&(r.isDirectionless()||(Tt+=l)),Nt+=l,Et+=l;return null!==t&&(null!=n?t.insertBefore(i,n):null!=(n=t.__lexicalLineBreak)?t.insertBefore(i,n):t.appendChild(i)),He(Ct,ht,_t,r,"created"),i}function Pt(e,t,n,r,i,l){let o=Nt;for(Nt="";n<=r;++n)At(e[n],i,l);je(t)&&(Nt+="\n\n"),i.__lexicalTextContent=Nt,Nt=o+Nt}function $t(e,t){return _n(e=t.get(e))||Rr(e)&&e.isInline()}function It(e,t,n){e=null!==e&&(0===e.__size||$t(e.__last,yt)),t=0===t.__size||$t(t.__last,vt),e?t||(null!=(t=n.__lexicalLineBreak)&&n.removeChild(t),n.__lexicalLineBreak=null):t&&(t=document.createElement("br"),n.__lexicalLineBreak=t,n.appendChild(t))}function Lt(e,t){var n=t.__lexicalDir;if(t.__lexicalDirTextContent!==Tt||n!==Ot){let l=""===Tt;if(l)var r=Ot;else r=Tt,r=X.test(r)?"rtl":Q.test(r)?"ltr":null;if(r!==n){let o=t.classList,s=ft.theme;var i=null!==n?s[n]:void 0;let a=null!==r?s[r]:void 0;void 0!==i&&("string"==typeof i&&(i=i.split(" "),i=s[n]=i),o.remove(...i)),null===r||l&&"ltr"===r?t.removeAttribute("dir"):(void 0!==a&&("string"==typeof a&&(n=a.split(" "),a=s[r]=n),void 0!==a&&o.add(...a)),t.dir=r),bt||(e.getWritable().__dir=r)}Ot=r,t.__lexicalDirTextContent=Tt,t.__lexicalDir=r}}function Ft(e,t){let n=[];for(e=e.__first;null!==e;){let r=t.get(e);void 0===r&&F(101),n.push(e),e=r.__next}return n}function Bt(e,t){var n=yt.get(e),r=vt.get(e);void 0!==n&&void 0!==r||F(61);var i=St||mt.has(e)||pt.has(e);let l=Ge(gt,e);if(n===r&&!i)return Pr(n)?(void 0!==(r=l.__lexicalTextContent)&&(Nt+=r,Et+=r),void 0!==(r=l.__lexicalDirTextContent)&&(Tt+=r)):(r=n.getTextContent(),Mn(n)&&!n.isDirectionless()&&(Tt+=r),Et+=r,Nt+=r),l;if(n!==r&&i&&He(Ct,ht,_t,r,"updated"),r.updateDOM(n,l,ft))return r=At(e,null,null),null===t&&F(62),t.replaceChild(r,l),wt(e,null),r;if(Pr(n)&&Pr(r)){if((e=r.__indent)!==n.__indent&&Mt(l,e),(e=r.__format)!==n.__format&&Rt(l,e),i){e=Tt,Tt="",i=Nt;var o=n.__size,s=r.__size;if(Nt="",1===o&&1===s){var a=n.__first;if(a===(t=r.__first))Bt(a,l);else{var u=Kt(a);t=At(t,null,null),l.replaceChild(t,u),wt(a,null)}}else{t=Ft(n,yt);var d=Ft(r,vt);if(0===o)0!==s&&Pt(d,r,0,s-1,l,null);else if(0===s)0!==o&&(Dt(t,0,o-1,(a=null==l.__lexicalLineBreak)?null:l),a&&(l.textContent=""));else{var c=t;t=d,d=o-1,o=s-1;let e=l.firstChild,n=0;for(s=0;n<=d&&s<=o;){var f=c[n];let r=t[s];if(f===r)e=Wt(Bt(r,l)),n++,s++;else{void 0===a&&(a=new Set(c)),void 0===u&&(u=new Set(t));let i=u.has(f),o=a.has(r);i?(o?((f=Ge(gt,r))===e?e=Wt(Bt(r,l)):(null!=e?l.insertBefore(f,e):l.appendChild(f),Bt(r,l)),n++):At(r,l,e),s++):(e=Wt(Kt(f)),wt(f,l),n++)}}u=s>o,(a=n>d)&&!u?Pt(t,r,s,o,l,a=void 0===(a=t[o+1])?null:gt.getElementByKey(a)):u&&!a&&Dt(c,n,d,l)}}je(r)&&(Nt+="\n\n"),l.__lexicalTextContent=Nt,Nt=i+Nt,Lt(r,l),Tt=e,Lr(r)||r.isInline()||It(n,r,l)}je(r)&&(Nt+="\n\n",Et+="\n\n")}else n=r.getTextContent(),Rr(r)?null!==(i=r.decorate(gt,ft))&&zt(e,i):Mn(r)&&!r.isDirectionless()&&(Tt+=n),Nt+=n,Et+=n;return!bt&&Lr(r)&&r.__cachedText!==Et&&(r.getWritable().__cachedText=Et),l}function zt(e,t){let n=gt._pendingDecorators,r=gt._decorators;if(null===n){if(r[e]===t)return;n=Ae(gt)}n[e]=t}function Wt(e){return null!==(e=e.nextSibling)&&e===gt._blockCursorElement&&(e=e.nextSibling),e}function Kt(e){let t=xt.get(e);return void 0===t&&F(75,e),t}let Yt=Object.freeze({}),Ht=[["keydown",function(e,t){if(Ut=e.timeStamp,Jt=e.keyCode,!t.isComposing()){var{keyCode:n,shiftKey:r,ctrlKey:o,metaKey:s,altKey:a}=e;if(!Or(t,_,e)){if(39!==n||o||s||a)if(39!==n||a||r||!o&&!s)if(37!==n||o||s||a)if(37!==n||a||r||!o&&!s)if(38!==n||o||s)if(40!==n||o||s)if(13===n&&r)Qt=!0,Or(t,N,e);else if(32===n)Or(t,T,e);else if(W&&o&&79===n)e.preventDefault(),Qt=!0,Or(t,l,!0);else if(13!==n||r){var u=W?!a&&!s&&(8===n||72===n&&o):!(o||a||s)&&8===n;u?8===n?Or(t,E,e):(e.preventDefault(),Or(t,i,!0)):27===n?Or(t,S,e):(u=W?!(r||a||s)&&(46===n||68===n&&o):!(o||a||s)&&46===n)?46===n?Or(t,b,e):(e.preventDefault(),Or(t,i,!1)):8===n&&(W?a:o)?(e.preventDefault(),Or(t,d,!0)):46===n&&(W?a:o)?(e.preventDefault(),Or(t,d,!1)):W&&s&&8===n?(e.preventDefault(),Or(t,c,!0)):W&&s&&46===n?(e.preventDefault(),Or(t,c,!1)):66===n&&!a&&(W?s:o)?(e.preventDefault(),Or(t,f,"bold")):85===n&&!a&&(W?s:o)?(e.preventDefault(),Or(t,f,"underline")):73===n&&!a&&(W?s:o)?(e.preventDefault(),Or(t,f,"italic")):9!==n||a||o||s?90===n&&!r&&(W?s:o)?(e.preventDefault(),Or(t,g,void 0)):(u=W?90===n&&s&&r:89===n&&o||90===n&&o&&r)?(e.preventDefault(),Or(t,h,void 0)):Jn(t._editorState._selection)?(u=!r&&(67===n&&(W?s:o)))?(e.preventDefault(),Or(t,R,e)):(u=!r&&(88===n&&(W?s:o)))?(e.preventDefault(),Or(t,A,e)):65===n&&(W?s:o)&&(e.preventDefault(),Or(t,P,e)):!K&&65===n&&(W?s:o)&&(e.preventDefault(),Or(t,P,e)):Or(t,O,e)}else Qt=!1,Or(t,N,e);else Or(t,C,e);else Or(t,x,e);else Or(t,v,e);else Or(t,y,e);else Or(t,m,e);else Or(t,p,e);(o||r||a||s)&&Or(t,L,e)}}}],["pointerdown",function(e,t){let n=e.target;e=e.pointerType,n instanceof Node&&"touch"!==e&&kr(t,(()=>{Rr(Re(n))||(Xt=!0)}))}],["compositionstart",function(e,t){kr(t,(()=>{let n=rr();if(Yn(n)&&!t.isComposing()){let r=n.anchor,i=n.anchor.getNode();we(r.key),(e.timeStamp<Ut+30||"element"===r.type||!n.isCollapsed()||i.getFormat()!==n.format||Mn(i)&&i.getStyle()!==n.style)&&Or(t,s,q)}}))}],["compositionend",function(e,t){K?Zt=!0:kr(t,(()=>{on(t,e.data)}))}],["input",function(e,t){e.stopPropagation(),kr(t,(()=>{var n=rr(),r=e.data,i=ln(e);if(null!=r&&Yn(n)&&tn(n,i,r,e.timeStamp,!1)){Zt&&(on(t,r),Zt=!1);var l=n.anchor,o=l.getNode();if(null===(i=ot(t._window)))return;let a=l.offset;(l=Y&&!n.isCollapsed()&&Mn(o)&&null!==i.anchorNode)&&(l=(o=o.getTextContent().slice(0,a)+r+o.getTextContent().slice(a+n.focus.offset))===(3===(i=i.anchorNode).nodeType?i.nodeValue:null)),l||Or(t,s,r),r=r.length,K&&1<r&&"insertCompositionText"===e.inputType&&!t.isComposing()&&(n.anchor.offset-=r),H||U||j||!t.isComposing()||(Ut=0,we(null))}else We(!1,t,null!==r?r:void 0),Zt&&(on(t,r||void 0),Zt=!1);vr(),de(n=Cr())})),jt=null}],["click",function(e,t){kr(t,(()=>{let n=rr();var i=ot(t._window);let l=ir();if(i)if(Yn(n)){let t=n.anchor;var o=t.getNode();"element"===t.type&&0===t.offset&&n.isCollapsed()&&!Lr(o)&&1===$e().getChildrenSize()&&o.getTopLevelElementOrThrow().isEmpty()&&null!==l&&n.is(l)?(i.removeAllRanges(),n.dirty=!0):3!==e.detail||n.isCollapsed()||o!==(i=n.focus.getNode())&&(Pr(o)?o.select(0):o.getParentOrThrow().select(0))}else"touch"===e.pointerType&&(null!==(o=i.anchorNode)&&(1===(o=o.nodeType)||3===o))&&Ie(i=nr(l,i,t,e));Or(t,r,e)}))}],["cut",Yt],["copy",Yt],["dragstart",Yt],["dragover",Yt],["dragend",Yt],["paste",Yt],["focus",Yt],["blur",Yt],["drop",Yt]];Y&&Ht.push(["beforeinput",(e,t)=>function(e,t){let n=e.inputType,r=ln(e);"deleteCompositionText"===n||K&&Ve(t)||"insertCompositionText"!==n&&kr(t,(()=>{let _=rr();if("deleteContentBackward"===n){if(null===_){var p=ir();if(!Yn(p))return;Ie(p.clone())}if(Yn(_)){if(J&&we(_.anchor.key),229===Jt&&e.timeStamp<Ut+30&&t.isComposing()&&_.anchor.key===_.focus.key){if(we(null),Ut=0,setTimeout((()=>{kr(t,(()=>{we(null)}))}),30),Yn(_)){if((p=_.anchor.getNode()).markDirty(),_.format=p.getFormat(),!Mn(p))throw Error("Anchor node must be a TextNode");_.style=p.getStyle()}1>=_.anchor.getNode().getTextContent().length&&(e.preventDefault(),Or(t,i,!0))}else we(null),e.preventDefault(),Or(t,i,!0);return}}if(Yn(_)){p=e.data,null!==jt&&We(!1,t,jt),_.dirty&&null===jt||!_.isCollapsed()||Lr(_.anchor.getNode())||null===r||_.applyDOMRange(r),jt=null;var m=_.focus,y=_.anchor.getNode();if(m=m.getNode(),"insertText"===n||"insertTranspose"===n)"\n"===p?(e.preventDefault(),Or(t,l,!1)):"\n\n"===p?(e.preventDefault(),Or(t,o,void 0)):null==p&&e.dataTransfer?(p=e.dataTransfer.getData("text/plain"),e.preventDefault(),_.insertRawText(p)):null!=p&&tn(_,r,p,e.timeStamp,!0)?(e.preventDefault(),Or(t,s,p)):jt=p,Vt=e.timeStamp;else switch(e.preventDefault(),n){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":Or(t,s,e);break;case"insertFromComposition":we(null),Or(t,s,e);break;case"insertLineBreak":we(null),Or(t,l,!1);break;case"insertParagraph":we(null),Qt&&!U?(Qt=!1,Or(t,l,!1)):Or(t,o,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":Or(t,a,e);break;case"deleteByComposition":(function(e,t){return e!==t||Pr(e)||Pr(t)||!e.isToken()||!t.isToken()})(y,m)&&Or(t,u,e);break;case"deleteByDrag":case"deleteByCut":Or(t,u,e);break;case"deleteContent":Or(t,i,!1);break;case"deleteWordBackward":Or(t,d,!0);break;case"deleteWordForward":Or(t,d,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":Or(t,c,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":Or(t,c,!1);break;case"formatStrikeThrough":Or(t,f,"strikethrough");break;case"formatBold":Or(t,f,"bold");break;case"formatItalic":Or(t,f,"italic");break;case"formatUnderline":Or(t,f,"underline");break;case"historyUndo":Or(t,g,void 0);break;case"historyRedo":Or(t,h,void 0)}}}))}(e,t)]);let Ut=0,Jt=0,Vt=0,jt=null,Gt=0,qt=!1,Xt=!1,Qt=!1,Zt=!1,en=[0,"",0,"root",0];function tn(e,t,n,r,i){let l=e.anchor,o=e.focus,s=l.getNode();var a=Cr();let u=ot(a._window),d=null!==u?u.anchorNode:null,c=l.key;a=a.getElementByKey(c);let f=n.length;return c!==o.key||!Mn(s)||(!i&&(!Y||Vt<r+50)||s.isDirty()&&2>f||Fe(n))&&l.offset!==o.offset&&!s.isComposing()||Ne(s)||s.isDirty()&&1<f||(i||!Y)&&null!==a&&!s.isComposing()&&d!==Te(a)||null!==u&&null!==t&&(!t.collapsed||t.startContainer!==u.anchorNode||t.startOffset!==u.anchorOffset)||s.getFormat()!==e.format||s.getStyle()!==e.style||function(e,t){if(t.isSegmented())return!0;if(!e.isCollapsed())return!1;e=e.anchor.offset;let n=t.getParentOrThrow(),r=t.isToken();return 0===e?((e=!t.canInsertTextBefore()||!n.canInsertTextBefore()||r)||(e=(Mn(t=t.getPreviousSibling())||Pr(t)&&t.isInline())&&!t.canInsertTextAfter()),e):e===t.getTextContentSize()&&(!t.canInsertTextAfter()||!n.canInsertTextAfter()||r)}(e,s)}function nn(e,t){return null!==e&&null!==e.nodeValue&&3===e.nodeType&&0!==t&&t!==e.nodeValue.length}function rn(e,t,r){let{anchorNode:i,anchorOffset:l,focusNode:o,focusOffset:s}=e;qt&&(qt=!1,nn(i,l)&&nn(o,s))||kr(t,(()=>{if(r){if(xe(t,i,o)){var l=rr();if(Yn(l)){var s=l.anchor,a=s.getNode();if(l.isCollapsed()){"Range"===e.type&&e.anchorNode===e.focusNode&&(l.dirty=!0);var u=Qe(t).event;u=u?u.timeStamp:performance.now();let[n,r,i,o,c]=en;var d=$e();if(d=!1===t.isComposing()&&""===d.getTextContent(),u<c+200&&s.offset===i&&s.key===o)l.format=n,l.style=r;else if("text"===s.type){if(!Mn(a))throw Error("Point.getNode() must return TextNode when type is text");l.format=a.getFormat(),l.style=a.getStyle()}else"element"!==s.type||d||(l.format=0,l.style="")}else{s=255,a=!1,d=(u=l.getNodes()).length;for(let e=0;e<d;e++){let t=u[e];if(Mn(t)&&(a=!0,0===(s&=t.getFormat())))break}l.format=a?s:0}}Or(t,n,void 0)}}else Ie(null)}))}function ln(e){return e.getTargetRanges?0===(e=e.getTargetRanges()).length?null:e[0]:null}function on(e,t){var n=e._compositionKey;if(we(null),null!==n&&null!=t){if(""===t)return t=ke(n),void(null!==(e=Te(e.getElementByKey(n)))&&null!==e.nodeValue&&Mn(t)&&Ke(t,e.nodeValue,null,null,!0));if("\n"===t[t.length-1]&&Yn(n=rr()))return t=n.focus,n.anchor.set(t.key,t.offset,t.type),void Or(e,N,null)}We(!0,e,t)}function sn(e){let t=e.__lexicalEventHandles;return void 0===t&&(t=[],e.__lexicalEventHandles=t),t}let an=new Map;function un(e){var t=e.target;let n=ot(null==t?null:9===t.nodeType?t.defaultView:t.ownerDocument.defaultView);if(null!==n){var r=Ce(n.anchorNode);if(null!==r){Xt&&(Xt=!1,kr(r,(()=>{var t=ir(),i=n.anchorNode;null!==i&&(1===(i=i.nodeType)||3===i)&&Ie(t=nr(t,n,r,e))})));var i=(t=(t=Be(r))[t.length-1])._key,l=an.get(i),o=l||t;o!==r&&rn(n,o,!1),rn(n,r,!0),r!==t?an.set(i,r):l&&an.delete(i)}}}function dn(e,t,n){vr();var r=e.__key;let i=e.getParent();if(null!==i){var l=rr();if(Yn(l)&&Pr(e)){var{anchor:o,focus:s}=l,a=o.getNode(),u=s.getNode();Xe(a,e)&&o.set(e.__key,0,"element"),Xe(u,e)&&s.set(e.__key,0,"element")}if(u=!1,Yn(a=l)&&t){l=a.anchor;let t=a.focus;l.key===r&&(sr(l,e,i,e.getPreviousSibling(),e.getNextSibling()),u=!0),t.key===r&&(sr(t,e,i,e.getPreviousSibling(),e.getNextSibling()),u=!0)}else Jn(a)&&t&&e.isSelected()&&e.selectPrevious();Yn(a)&&t&&!u?(r=e.getIndexWithinParent(),be(e),lr(a,i,r,-1)):be(e),n||et(i)||i.canBeEmpty()||!i.isEmpty()||dn(i,t),t&&Lr(i)&&i.isEmpty()&&i.selectEnd()}}class cn{static getType(){F(64,this.name)}static clone(){F(65,this.name)}constructor(e){this.__type=this.constructor.getType(),this.__next=this.__prev=this.__parent=null,Se(this,e)}getType(){return this.__type}isInline(){throw Error(`LexicalNode: Node ${this.constructor.name} does not implement .isInline().`)}isAttached(){for(var e=this.__key;null!==e;){if("root"===e)return!0;if(null===(e=ke(e)))break;e=e.__parent}return!1}isSelected(e){if(null==(e=e||rr()))return!1;let t=e.getNodes().some((e=>e.__key===this.__key));return(Mn(this)||!Yn(e)||"element"!==e.anchor.type||"element"!==e.focus.type||e.anchor.key!==e.focus.key||e.anchor.offset!==e.focus.offset)&&t}getKey(){return this.__key}getIndexWithinParent(){var e=this.getParent();if(null===e)return-1;e=e.getFirstChild();let t=0;for(;null!==e;){if(this.is(e))return t;t++,e=e.getNextSibling()}return-1}getParent(){let e=this.getLatest().__parent;return null===e?null:ke(e)}getParentOrThrow(){let e=this.getParent();return null===e&&F(66,this.__key),e}getTopLevelElement(){let e=this;for(;null!==e;){let t=e.getParent();if(et(t)){if(!Pr(e))throw Error("Children of root nodes must be elements");return e}e=t}return null}getTopLevelElementOrThrow(){let e=this.getTopLevelElement();return null===e&&F(67,this.__key),e}getParents(){let e=[],t=this.getParent();for(;null!==t;)e.push(t),t=t.getParent();return e}getParentKeys(){let e=[],t=this.getParent();for(;null!==t;)e.push(t.__key),t=t.getParent();return e}getPreviousSibling(){let e=this.getLatest().__prev;return null===e?null:ke(e)}getPreviousSiblings(){let e=[];var t=this.getParent();if(null===t)return e;for(t=t.getFirstChild();null!==t&&!t.is(this);)e.push(t),t=t.getNextSibling();return e}getNextSibling(){let e=this.getLatest().__next;return null===e?null:ke(e)}getNextSiblings(){let e=[],t=this.getNextSibling();for(;null!==t;)e.push(t),t=t.getNextSibling();return e}getCommonAncestor(e){let t=this.getParents();var n=e.getParents();Pr(this)&&t.unshift(this),Pr(e)&&n.unshift(e),e=t.length;var r=n.length;if(0===e||0===r||t[e-1]!==n[r-1])return null;for(n=new Set(n),r=0;r<e;r++){let e=t[r];if(n.has(e))return e}return null}is(e){return null!=e&&this.__key===e.__key}isBefore(e){if(this===e)return!1;if(e.isParentOf(this))return!0;if(this.isParentOf(e))return!1;var t=this.getCommonAncestor(e);let n=this;for(;;){var r=n.getParentOrThrow();if(r===t){r=n.getIndexWithinParent();break}n=r}for(n=e;;){if((e=n.getParentOrThrow())===t){t=n.getIndexWithinParent();break}n=e}return r<t}isParentOf(e){let t=this.__key;if(t===e.__key)return!1;for(;null!==e;){if(e.__key===t)return!0;e=e.getParent()}return!1}getNodesBetween(e){let t=this.isBefore(e),n=[],r=new Set;for(var i=this;;){var l=i.__key;if(r.has(l)||(r.add(l),n.push(i)),i===e)break;if(null!==(l=Pr(i)?t?i.getFirstChild():i.getLastChild():null))i=l;else if(null!==(l=t?i.getNextSibling():i.getPreviousSibling()))i=l;else{if(i=i.getParentOrThrow(),r.has(i.__key)||n.push(i),i===e)break;l=i;do{null===l&&F(68),i=t?l.getNextSibling():l.getPreviousSibling(),null!==(l=l.getParent())&&(null!==i||r.has(l.__key)||n.push(l))}while(null===i)}}return t||n.reverse(),n}isDirty(){let e=Cr()._dirtyLeaves;return null!==e&&e.has(this.__key)}getLatest(){let e=ke(this.__key);return null===e&&F(113),e}getWritable(){vr();var e=xr(),t=Cr();e=e._nodeMap;let n=this.__key,r=this.getLatest(),i=r.__parent;t=t._cloneNotNeeded;var l=rr();return Hn(l)&&l.setCachedNodes(null),t.has(n)?(Oe(r),r):((l=r.constructor.clone(r)).__parent=i,l.__next=r.__next,l.__prev=r.__prev,Pr(r)&&Pr(l)?(l.__first=r.__first,l.__last=r.__last,l.__size=r.__size,l.__indent=r.__indent,l.__format=r.__format,l.__dir=r.__dir):Mn(r)&&Mn(l)&&(l.__format=r.__format,l.__style=r.__style,l.__mode=r.__mode,l.__detail=r.__detail),t.add(n),l.__key=n,Oe(l),e.set(n,l),l)}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(){F(70)}updateDOM(){F(71)}exportDOM(e){return{element:this.createDOM(e._config,e)}}exportJSON(){F(72)}static importJSON(){F(18,this.name)}static transform(){return null}remove(e){dn(this,!0,e)}replace(e,t){vr();var n=rr();null!==n&&(n=n.clone()),rt(this,e);let r=this.getLatest(),i=this.__key,l=e.__key,o=e.getWritable(),s=(e=this.getParentOrThrow().getWritable()).__size;be(o);let a=r.getPreviousSibling(),u=r.getNextSibling(),d=r.__prev,c=r.__next,f=r.__parent;if(dn(r,!1,!0),null===a?e.__first=l:a.getWritable().__next=l,o.__prev=d,null===u?e.__last=l:u.getWritable().__prev=l,o.__next=c,o.__parent=f,e.__size=s,t){if(!Pr(this)||!Pr(o))throw Error("includeChildren should only be true for ElementNodes");this.getChildren().forEach((e=>{o.append(e)}))}return Yn(n)&&(Ie(n),t=n.anchor,n=n.focus,t.key===i&&Fn(t,o),n.key===i&&Fn(n,o)),De()===i&&we(l),o}insertAfter(e,t=!0){vr(),rt(this,e);var n=this.getWritable();let r=e.getWritable();var i=r.getParent();let l=rr();var o=!1,s=!1;if(null!==i){var a=e.getIndexWithinParent();be(r),Yn(l)&&(s=i.__key,o=l.anchor,i=l.focus,o="element"===o.type&&o.key===s&&o.offset===a+1,s="element"===i.type&&i.key===s&&i.offset===a+1)}i=this.getNextSibling(),a=this.getParentOrThrow().getWritable();let u=r.__key,d=n.__next;return null===i?a.__last=u:i.getWritable().__prev=u,a.__size++,n.__next=u,r.__next=d,r.__prev=n.__key,r.__parent=n.__parent,t&&Yn(l)&&(lr(l,a,(t=this.getIndexWithinParent())+1),n=a.__key,o&&l.anchor.set(n,t+2,"element"),s&&l.focus.set(n,t+2,"element")),e}insertBefore(e,t=!0){vr(),rt(this,e);var n=this.getWritable();let r=e.getWritable(),i=r.__key;be(r);let l=this.getPreviousSibling(),o=this.getParentOrThrow().getWritable(),s=n.__prev,a=this.getIndexWithinParent();return null===l?o.__first=i:l.getWritable().__next=i,o.__size++,n.__prev=i,r.__prev=s,r.__next=n.__key,r.__parent=n.__parent,n=rr(),t&&Yn(n)&&lr(n,t=this.getParentOrThrow(),a),e}isParentRequired(){return!1}createParentElementNode(){return Yr()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(e,t){vr();let n=this.getPreviousSibling(),r=this.getParentOrThrow();return null===n?r.select(0,0):Pr(n)?n.select():Mn(n)?n.select(e,t):(e=n.getIndexWithinParent()+1,r.select(e,e))}selectNext(e,t){vr();let n=this.getNextSibling(),r=this.getParentOrThrow();return null===n?r.select():Pr(n)?n.select(0,0):Mn(n)?n.select(e,t):(e=n.getIndexWithinParent(),r.select(e,e))}markDirty(){this.getWritable()}}class fn extends cn{static getType(){return"linebreak"}static clone(e){return new fn(e.__key)}constructor(e){super(e)}getTextContent(){return"\n"}createDOM(){return document.createElement("br")}updateDOM(){return!1}static importDOM(){return{br:e=>{let t,n,r=e.parentElement;return null!==r&&((t=r.firstChild)===e||t.nextSibling===e&&3===t.nodeType&&null!==(t.textContent||"").match(/^( |\t|\r?\n)+$/))&&((n=r.lastChild)===e||n.previousSibling===e&&3===n.nodeType&&null!==(n.textContent||"").match(/^( |\t|\r?\n)+$/))?null:{conversion:gn,priority:0}}}}static importJSON(){return hn()}exportJSON(){return{type:"linebreak",version:1}}}function gn(){return{node:hn()}}function hn(){return nt(new fn)}function _n(e){return e instanceof fn}function pn(e,t){return 16&t?"code":128&t?"mark":32&t?"sub":64&t?"sup":null}function mn(e,t){return 1&t?"strong":2&t?"em":"span"}function yn(e,t,n,r,i){e=r.classList,void 0!==(r=Ye(i,"base"))&&e.add(...r);let l=!1,o=8&t&&4&t;var s=8&n&&4&n;void 0!==(r=Ye(i,"underlineStrikethrough"))&&(s?(l=!0,o||e.add(...r)):o&&e.remove(...r));for(let a in Z)s=Z[a],void 0!==(r=Ye(i,a))&&(n&s&&(!l||"underline"!==a&&"strikethrough"!==a)?(!(t&s)||o&&"underline"===a||"strikethrough"===a)&&e.add(...r):t&s&&e.remove(...r))}function vn(e,t,n){let r=t.firstChild;if(e+=(n=n.isComposing())?G:"",null==r)t.textContent=e;else if((t=r.nodeValue)!==e)if(n||K){n=t.length;let i=e.length,l=0,o=0;for(;l<n&&l<i&&t[l]===e[l];)l++;for(;o+l<n&&o+l<i&&t[n-o-1]===e[i-o-1];)o++;e=[l,n-l-o,e.slice(l,i-o)];let[s,a,u]=e;0!==a&&r.deleteData(s,a),r.insertData(s,u)}else r.nodeValue=e}function xn(e,t){return(t=document.createElement(t)).appendChild(e),t}class Cn extends cn{static getType(){return"text"}static clone(e){return new Cn(e.__text,e.__key)}constructor(e,t){super(t),this.__text=e,this.__format=0,this.__style="",this.__detail=this.__mode=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){let e=this.getLatest();return ie[e.__mode]}getStyle(){return this.getLatest().__style}isToken(){return 1===this.getLatest().__mode}isComposing(){return this.__key===De()}isSegmented(){return 2===this.getLatest().__mode}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(e){return e=Z[e],!!(this.getFormat()&e)}isSimpleText(){return"text"===this.__type&&0===this.__mode}getTextContent(){return this.getLatest().__text}getFormatFlags(e,t){return Ee(this.getLatest().__format,e,t)}createDOM(e){var t=this.__format,n=pn(0,t);let r=mn(0,t),i=document.createElement(null===n?r:n),l=i;return this.hasFormat("code")&&i.setAttribute("spellcheck","false"),null!==n&&(l=document.createElement(r),i.appendChild(l)),n=l,vn(this.__text,n,this),void 0!==(e=e.theme.text)&&yn(r,0,t,n,e),""!==(t=this.__style)&&(i.style.cssText=t),i}updateDOM(e,t,n){let r=this.__text;var i=e.__format,l=this.__format,o=pn(0,i);let s=pn(0,l);var a=mn(0,i);let u=mn(0,l);return(null===o?a:o)!==(null===s?u:s)||(o===s&&a!==u?(null==(i=t.firstChild)&&F(48),vn(r,e=o=document.createElement(u),this),void 0!==(n=n.theme.text)&&yn(u,0,l,e,n),t.replaceChild(o,i),!1):(a=t,null!==s&&null!==o&&(null==(a=t.firstChild)&&F(49)),vn(r,a,this),void 0!==(n=n.theme.text)&&i!==l&&yn(u,i,l,a,n),l=this.__style,e.__style!==l&&(t.style.cssText=l),!1))}static importDOM(){return{"#text":()=>({conversion:Sn,priority:0}),b:()=>({conversion:Tn,priority:0}),code:()=>({conversion:Dn,priority:0}),em:()=>({conversion:Dn,priority:0}),i:()=>({conversion:Dn,priority:0}),s:()=>({conversion:Dn,priority:0}),span:()=>({conversion:Nn,priority:0}),strong:()=>({conversion:Dn,priority:0}),sub:()=>({conversion:Dn,priority:0}),sup:()=>({conversion:Dn,priority:0}),u:()=>({conversion:Dn,priority:0})}}static importJSON(e){let t=kn(e.text);return t.setFormat(e.format),t.setDetail(e.detail),t.setMode(e.mode),t.setStyle(e.style),t}exportDOM(e){return({element:e}=super.exportDOM(e)),null!==e&&at(e)||F(132),e.style.whiteSpace="pre-wrap",this.hasFormat("bold")&&(e=xn(e,"b")),this.hasFormat("italic")&&(e=xn(e,"i")),this.hasFormat("strikethrough")&&(e=xn(e,"s")),this.hasFormat("underline")&&(e=xn(e,"u")),{element:e}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),type:"text",version:1}}selectionTransform(){}setFormat(e){let t=this.getWritable();return t.__format="string"==typeof e?Z[e]:e,t}setDetail(e){let t=this.getWritable();return t.__detail="string"==typeof e?ee[e]:e,t}setStyle(e){let t=this.getWritable();return t.__style=e,t}toggleFormat(e){return e=Ee(this.getFormat(),e,null),this.setFormat(e)}toggleDirectionless(){let e=this.getWritable();return e.__detail^=1,e}toggleUnmergeable(){let e=this.getWritable();return e.__detail^=2,e}setMode(e){if(e=re[e],this.__mode===e)return this;let t=this.getWritable();return t.__mode=e,t}setTextContent(e){if(this.__text===e)return this;let t=this.getWritable();return t.__text=e,t}select(e,t){vr();let n=rr();var r=this.getTextContent();let i=this.__key;return"string"==typeof r?(r=r.length,void 0===e&&(e=r),void 0===t&&(t=r)):t=e=0,Yn(n)?((r=De())!==n.anchor.key&&r!==n.focus.key||we(i),n.setTextNodeRange(this,e,this,t),n):er(i,e,i,t,"text","text")}selectStart(){return this.select(0,0)}selectEnd(){let e=this.getTextContentSize();return this.select(e,e)}spliceText(e,t,n,r){let i=this.getWritable(),l=i.__text,o=n.length,s=e;0>s&&(s=o+s,0>s&&(s=0));let a=rr();return r&&Yn(a)&&(e+=o,a.setTextNodeRange(i,e,i,e)),t=l.slice(0,s)+n+l.slice(s+t),i.__text=t,i}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...e){vr();var t=this.getLatest(),n=t.getTextContent(),r=t.__key,i=De(),l=new Set(e);e=[];for(var o=n.length,s="",a=0;a<o;a++)""!==s&&l.has(a)&&(e.push(s),s=""),s+=n[a];if(""!==s&&e.push(s),0===(l=e.length))return[];if(e[0]===n)return[t];var u=e[0];n=t.getParentOrThrow(),a=t.getFormat();let d=t.getStyle(),c=t.__detail;o=!1,t.isSegmented()?((s=kn(u)).__format=a,s.__style=d,s.__detail=c,o=!0):(s=t.getWritable()).__text=u,t=rr(),s=[s],u=u.length;for(let h=1;h<l;h++){var f=e[h],g=f.length;(f=kn(f).getWritable()).__format=a,f.__style=d,f.__detail=c;let n=f.__key;if(g=u+g,Yn(t)){let e=t.anchor,i=t.focus;e.key===r&&"text"===e.type&&e.offset>u&&e.offset<=g&&(e.key=n,e.offset-=u,t.dirty=!0),i.key===r&&"text"===i.type&&i.offset>u&&i.offset<=g&&(i.key=n,i.offset-=u,t.dirty=!0)}i===r&&we(n),u=g,s.push(f)}return r=this.getPreviousSibling(),i=this.getNextSibling(),null!==r&&Oe(r),null!==i&&Oe(i),r=n.getWritable(),i=this.getIndexWithinParent(),o?(r.splice(i,0,s),this.remove()):r.splice(i,1,s),Yn(t)&&lr(t,n,i,l-1),s}mergeWithSibling(e){var t=e===this.getPreviousSibling();t||e===this.getNextSibling()||F(50);var n=this.__key;let r=e.__key,i=this.__text,l=i.length;De()===r&&we(n);let o=rr();if(Yn(o)){let i=o.anchor,s=o.focus;null!==i&&i.key===r&&(ar(i,t,n,e,l),o.dirty=!0),null!==s&&s.key===r&&(ar(s,t,n,e,l),o.dirty=!0)}return n=e.__text,this.setTextContent(t?n+i:i+n),t=this.getWritable(),e.remove(),t}isTextEntity(){return!1}}function Nn(e){let t="700"===e.style.fontWeight,n="line-through"===e.style.textDecoration,r="italic"===e.style.fontStyle,i="underline"===e.style.textDecoration,l=e.style.verticalAlign;return{forChild:e=>Mn(e)?(t&&e.toggleFormat("bold"),n&&e.toggleFormat("strikethrough"),r&&e.toggleFormat("italic"),i&&e.toggleFormat("underline"),"sub"===l&&e.toggleFormat("subscript"),"super"===l&&e.toggleFormat("superscript"),e):e,node:null}}function Tn(e){let t="normal"===e.style.fontWeight;return{forChild:e=>(Mn(e)&&!t&&e.toggleFormat("bold"),e),node:null}}let En=new WeakMap;function Sn(e){null===e.parentElement&&F(129);for(var t,n=e.textContent||"",r=e.parentNode,i=[e];null!==r&&void 0===(t=En.get(r))&&!("PRE"===r.nodeName||1===r.nodeType&&void 0!==r.style&&void 0!==r.style.whiteSpace&&r.style.whiteSpace.startsWith("pre"));)i.push(r),r=r.parentNode;for(t=void 0===t?r:t,r=0;r<i.length;r++)En.set(i[r],t);if(null!==t){for(e=[],i=(n=n.split(/(\r?\n|\t)/)).length,t=0;t<i;t++)"\n"===(r=n[t])||"\r\n"===r?e.push(hn()):"\t"===r?e.push(An()):""!==r&&e.push(kn(r));return{node:e}}if(""===(n=n.replace(/\r/g,"").replace(/[ \t\n]+/g," ")))return{node:null};if(" "===n[0]){for(i=e,t=!0;null!==i&&null!==(i=On(i,!1));)if(0<(r=i.textContent||"").length){/[ \t\n]$/.test(r)&&(n=n.slice(1)),t=!1;break}t&&(n=n.slice(1))}if(" "===n[n.length-1]){for(i=!0;null!==e&&null!==(e=On(e,!0));)if(0<(e.textContent||"").replace(/^( |\t|\r?\n)+/,"").length){i=!1;break}i&&(n=n.slice(0,n.length-1))}return""===n?{node:null}:{node:kn(n)}}let bn=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/,"i");function On(e,t){for(;;){for(var n=void 0;null===(n=t?e.nextSibling:e.previousSibling);)if(null===(e=e.parentElement))return null;if(1===(e=n).nodeType&&(""===(n=e.style.display)&&null===e.nodeName.match(bn)||""!==n&&!n.startsWith("inline")))return null;for(;null!==(n=t?e.firstChild:e.lastChild);)e=n;if(3===e.nodeType)return e;if("BR"===e.nodeName)return null}}let wn={code:"code",em:"italic",i:"italic",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function Dn(e){let t=wn[e.nodeName.toLowerCase()];return void 0===t?{node:null}:{forChild:e=>(Mn(e)&&!e.hasFormat(t)&&e.toggleFormat(t),e),node:null}}function kn(e=""){return nt(new Cn(e))}function Mn(e){return e instanceof Cn}class Rn extends Cn{static getType(){return"tab"}static clone(e){let t=new Rn(e.__key);return t.__text=e.__text,t.__format=e.__format,t.__style=e.__style,t}constructor(e){super("\t",e),this.__detail=2}static importDOM(){return null}static importJSON(e){let t=An();return t.setFormat(e.format),t.setStyle(e.style),t}exportJSON(){return{...super.exportJSON(),type:"tab",version:1}}setTextContent(){F(126)}setDetail(){F(127)}setMode(){F(128)}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function An(){return nt(new Rn)}function Pn(e){return e instanceof Rn}class $n{constructor(e,t,n){this._selection=null,this.key=e,this.offset=t,this.type=n}is(e){return this.key===e.key&&this.offset===e.offset&&this.type===e.type}isBefore(e){let t=this.getNode(),n=e.getNode(),r=this.offset;if(e=e.offset,Pr(t)){var i=t.getDescendantByIndex(r);t=null!=i?i:t}return Pr(n)&&(i=n.getDescendantByIndex(e),n=null!=i?i:n),t===n?r<e:t.isBefore(n)}getNode(){let e=ke(this.key);return null===e&&F(20),e}set(e,t,n){let r=this._selection,i=this.key;this.key=e,this.offset=t,this.type=n,yr()||(De()===i&&we(e),null!==r&&(r.setCachedNodes(null),r.dirty=!0))}}function In(e,t,n){return new $n(e,t,n)}function Ln(e,t){let n=t.__key,r=e.offset,i="element";if(Mn(t))i="text",r>(t=t.getTextContentSize())&&(r=t);else if(!Pr(t)){var l=t.getNextSibling();Mn(l)?(n=l.__key,r=0,i="text"):(l=t.getParent())&&(n=l.__key,r=t.getIndexWithinParent()+1)}e.set(n,r,i)}function Fn(e,t){if(Pr(t)){let n=t.getLastDescendant();Pr(n)||Mn(n)?Ln(e,n):Ln(e,t)}else Ln(e,t)}function Bn(e,t,n,r){let i=e.getNode(),l=i.getChildAtIndex(e.offset),o=kn(),s=Lr(i)?Yr().append(o):o;o.setFormat(n),o.setStyle(r),null===l?i.append(s):l.insertBefore(s),e.is(t)&&t.set(o.__key,0,"text"),e.set(o.__key,0,"text")}function zn(e,t,n,r){e.key=t,e.offset=n,e.type=r}class Wn{constructor(e,t){this.anchor=e,this.focus=t,e._selection=this,t._selection=this,this._cachedNodes=null,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){return!!Hn(e)&&(this.anchor.is(e.anchor)&&this.focus.is(e.focus))}isCollapsed(){return!1}extract(){return this.getNodes()}isBackward(){return this.focus.isBefore(this.anchor)}getCharacterOffsets(){return jn(this)}}class Kn{constructor(e){this.dirty=!1,this._nodes=e,this._cachedNodes=null}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){if(!Jn(e))return!1;let t=this._nodes,n=e._nodes;return t.size===n.size&&Array.from(t).every((e=>n.has(e)))}add(e){this.dirty=!0,this._nodes.add(e),this._cachedNodes=null}delete(e){this.dirty=!0,this._nodes.delete(e),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(e){return this._nodes.has(e)}clone(){return new Kn(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(){}insertText(){}insertNodes(e){let t=this.getNodes(),n=t.length;var r=t[n-1];if(Mn(r))r=r.select();else{let e=r.getIndexWithinParent()+1;r=r.getParentOrThrow().select(e,e)}for(r.insertNodes(e),e=0;e<n;e++)t[e].remove()}getNodes(){var e=this._cachedNodes;if(null!==e)return e;var t=this._nodes;e=[];for(let n of t)null!==(t=ke(n))&&e.push(t);return yr()||(this._cachedNodes=e),e}getTextContent(){let e=this.getNodes(),t="";for(let n=0;n<e.length;n++)t+=e[n].getTextContent();return t}}function Yn(e){return e instanceof Un}function Hn(e){return e instanceof Wn}class Un extends Wn{constructor(e,t,n,r){super(e,t),this.format=n,this.style=r}is(e){return!!Yn(e)&&(this.anchor.is(e.anchor)&&this.focus.is(e.focus)&&this.format===e.format&&this.style===e.style)}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){var e=this._cachedNodes;if(null!==e)return e;e=this.anchor;var t=this.focus,n=e.isBefore(t),r=n?e:t;n=n?t:e,e=r.getNode(),t=n.getNode();let i=r.offset;return r=n.offset,Pr(e)&&(n=e.getDescendantByIndex(i),e=null!=n?n:e),Pr(t)&&(null!==(n=t.getDescendantByIndex(r))&&n!==e&&t.getChildAtIndex(r)===n&&(n=n.getPreviousSibling()),t=null!=n?n:t),e=e.is(t)?Pr(e)&&0<e.getChildrenSize()?[]:[e]:e.getNodesBetween(t),yr()||(this._cachedNodes=e),e}setTextNodeRange(e,t,n,r){zn(this.anchor,e.__key,t,"text"),zn(this.focus,n.__key,r,"text"),this._cachedNodes=null,this.dirty=!0}getTextContent(){let e=this.getNodes();if(0===e.length)return"";let t=e[0],n=e[e.length-1],r=this.anchor,i=this.focus,l=r.isBefore(i),[o,s]=jn(this),a="",u=!0;for(let d=0;d<e.length;d++){let c=e[d];if(Pr(c)&&!c.isInline())u||(a+="\n"),u=!c.isEmpty();else if(u=!1,Mn(c)){let e=c.getTextContent();c===t?c===n?"element"===r.type&&"element"===i.type&&i.offset!==r.offset||(e=o<s?e.slice(o,s):e.slice(s,o)):e=l?e.slice(o):e.slice(s):c===n&&(e=l?e.slice(0,s):e.slice(0,o)),a+=e}else!Rr(c)&&!_n(c)||c===n&&this.isCollapsed()||(a+=c.getTextContent())}return a}applyDOMRange(e){let t=Cr(),n=t.getEditorState()._selection;if(null!==(e=Zn(e.startContainer,e.startOffset,e.endContainer,e.endOffset,t,n))){var[r,i]=e;zn(this.anchor,r.key,r.offset,r.type),zn(this.focus,i.key,i.offset,i.type),this._cachedNodes=null}}clone(){let e=this.anchor,t=this.focus;return new Un(In(e.key,e.offset,e.type),In(t.key,t.offset,t.type),this.format,this.style)}toggleFormat(e){this.format=Ee(this.format,e,null),this.dirty=!0}setStyle(e){this.style=e,this.dirty=!0}hasFormat(e){return!!(this.format&Z[e])}insertRawText(e){let t=[],n=(e=e.split(/(\r?\n|\t)/)).length;for(let r=0;r<n;r++){let n=e[r];"\n"===n||"\r\n"===n?t.push(hn()):"\t"===n?t.push(An()):t.push(kn(n))}this.insertNodes(t)}insertText(e){var t=this.anchor,n=this.focus,r=this.isCollapsed()||t.isBefore(n),i=this.format,l=this.style;r&&"element"===t.type?Bn(t,n,i,l):r||"element"!==n.type||Bn(n,t,i,l);var o=this.getNodes(),s=o.length,a=r?n:t;n=(r?t:n).offset;var u=a.offset;Mn(t=o[0])||F(26),r=t.getTextContent().length;var d=t.getParentOrThrow(),c=o[s-1];if(this.isCollapsed()&&n===r&&(t.isSegmented()||t.isToken()||!t.canInsertTextAfter()||!d.canInsertTextAfter()&&null===t.getNextSibling())){var f=t.getNextSibling();if(Mn(f)&&f.canInsertTextBefore()&&!Ne(f)||((f=kn()).setFormat(i),d.canInsertTextAfter()?t.insertAfter(f):d.insertAfter(f)),f.select(0,0),t=f,""!==e)return void this.insertText(e)}else if(this.isCollapsed()&&0===n&&(t.isSegmented()||t.isToken()||!t.canInsertTextBefore()||!d.canInsertTextBefore()&&null===t.getPreviousSibling())){if(Mn(f=t.getPreviousSibling())&&!Ne(f)||((f=kn()).setFormat(i),d.canInsertTextBefore()?t.insertBefore(f):d.insertBefore(f)),f.select(),t=f,""!==e)return void this.insertText(e)}else if(t.isSegmented()&&n!==r)(d=kn(t.getTextContent())).setFormat(i),t.replace(d),t=d;else if(!(this.isCollapsed()||""===e||(f=c.getParent(),d.canInsertTextBefore()&&d.canInsertTextAfter()&&(!Pr(f)||f.canInsertTextBefore()&&f.canInsertTextAfter()))))return this.insertText(""),Qn(this.anchor,this.focus,null),void this.insertText(e);if(1===s)if(t.isToken())(e=kn(e)).select(),t.replace(e);else{if(o=t.getFormat(),s=t.getStyle(),n!==u||o===i&&s===l){if(Pn(t))return(e=kn(e)).setFormat(i),e.setStyle(l),e.select(),void t.replace(e)}else{if(""!==t.getTextContent())return(o=kn(e)).setFormat(i),o.setStyle(l),o.select(),0===n?t.insertBefore(o,!1):([s]=t.splitText(n),s.insertAfter(o,!1)),void(o.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=e.length));t.setFormat(i),t.setStyle(l)}""===(t=t.spliceText(n,u-n,e,!0)).getTextContent()?t.remove():"text"===this.anchor.type&&(t.isComposing()?this.anchor.offset-=e.length:(this.format=o,this.style=s))}else{if(i=new Set([...t.getParentKeys(),...c.getParentKeys()]),f=Pr(t)?t:t.getParentOrThrow(),l=Pr(c)?c:c.getParentOrThrow(),d=c,!f.is(l)&&l.isInline())do{d=l,l=l.getParentOrThrow()}while(l.isInline());if("text"===a.type&&(0!==u||""===c.getTextContent())||"element"===a.type&&c.getIndexWithinParent()<u)if(Mn(c)&&!c.isToken()&&u!==c.getTextContentSize()){if(c.isSegmented()){var g=kn(c.getTextContent());c.replace(g),c=g}Lr(a.getNode())||"text"!==a.type||(c=c.spliceText(0,u,"")),i.add(c.__key)}else(a=c.getParentOrThrow()).canBeEmpty()||1!==a.getChildrenSize()?c.remove():a.remove();else i.add(c.__key);for(a=l.getChildren(),u=new Set(o),c=f.is(l),f=f.isInline()&&null===t.getNextSibling()?f:t,g=a.length-1;0<=g;g--){let e=a[g];if(e.is(t)||Pr(e)&&e.isParentOf(t))break;e.isAttached()&&(!u.has(e)||e.is(d)?c||f.insertAfter(e,!1):e.remove())}if(!c)for(a=l,l=null;null!==a;)(0===(c=(u=a.getChildren()).length)||u[c-1].is(l))&&(i.delete(a.__key),l=a),a=a.getParent();for(t.isToken()?n===r?t.select():((e=kn(e)).select(),t.replace(e)):""===(t=t.spliceText(n,r-n,e,!0)).getTextContent()?t.remove():t.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=e.length),e=1;e<s;e++)t=o[e],i.has(t.__key)||t.remove()}}removeText(){this.insertText("")}formatText(e){if(this.isCollapsed())this.toggleFormat(e),we(null);else{var t=this.getNodes(),n=[];for(var r of t)Mn(r)&&n.push(r);var i=n.length;if(0===i)this.toggleFormat(e),we(null);else{r=this.anchor;var l=this.focus,o=this.isBackward();t=o?l:r,r=o?r:l;var s=0,a=n[0];if(l="element"===t.type?0:t.offset,"text"===t.type&&l===a.getTextContentSize()&&(s=1,a=n[1],l=0),null!=a){o=a.getFormatFlags(e,null);var u=i-1,d=n[u];if(i="text"===r.type?r.offset:d.getTextContentSize(),a.is(d))l!==i&&(0===l&&i===a.getTextContentSize()?a.setFormat(o):(e=a.splitText(l,i),(e=0===l?e[0]:e[1]).setFormat(o),"text"===t.type&&t.set(e.__key,0,"text"),"text"===r.type&&r.set(e.__key,i-l,"text")),this.format=o);else{0!==l&&([,a]=a.splitText(l),l=0),a.setFormat(o);var c=d.getFormatFlags(e,o);for(0<i&&(i!==d.getTextContentSize()&&([d]=d.splitText(i)),d.setFormat(c)),s+=1;s<u;s++){let t=n[s];if(!t.isToken()){let n=t.getFormatFlags(e,c);t.setFormat(n)}}"text"===t.type&&t.set(a.__key,l,"text"),"text"===r.type&&r.set(d.__key,i,"text"),this.format=o|c}}}}}insertNodes(e){if(0!==e.length){if("root"===this.anchor.key){this.insertParagraph();var t=rr();if(!Yn(t))throw Error("Expected RangeSelection after insertParagraph");return t.insertNodes(e)}var n=dt(this.anchor.getNode(),ut);if(t=e[e.length-1],"__language"in n&&Pr(n))if("__language"in e[0])this.insertText(e[0].getTextContent());else{var r=dr(this);n.splice(r,0,e),t.selectEnd()}else if(e.some((e=>(Pr(e)||Rr(e))&&!e.isInline()))){t=function(e){let t=Yr(),n=null;for(let r=0;r<e.length;r++){let i=e[r],l=_n(i);if(l||Rr(i)&&i.isInline()||Pr(i)&&i.isInline()||Mn(i)||i.isParentRequired()){if(null===n&&(n=i.createParentElementNode(),t.append(n),l))continue;null!==n&&n.append(i)}else t.append(i),n=null}return t}(e),e=t.getLastDescendant();var i=t.getChildren();t=Pr(n)&&n.isEmpty()?null:this.insertParagraph(),r=i[i.length-1];var l=i[0];if(Pr(o=l)&&ut(o)&&!o.isEmpty()&&Pr(n)&&(!n.isEmpty()||"__value"in n&&"__checked"in n)){if(!Pr(n))throw Error("Expected 'firstBlock' to be an ElementNode");n.append(...l.getChildren()),l=i[1]}l&&function(e,t,n){n=n||t.getParentOrThrow().getLastChild();let r=t;for(t=[t];r!==n;){if(!r.getNextSibling())throw Error("insertRangeAfter: lastToInsert must be a later sibling of firstToInsert");r=r.getNextSibling(),t.push(r)}for(let i of t)e=e.insertAfter(i)}(n,l),i=dt(e,ut),t&&Pr(i)&&("__value"in t&&"__checked"in t||ut(r))&&(i.append(...t.getChildren()),t.remove()),Pr(n)&&n.isEmpty()&&n.remove(),e.selectEnd(),_n(e=Pr(n)?n.getLastChild():null)&&i!==n&&e.remove()}else{if(!Pr(n))throw Error("Expected 'firstBlock' to be an ElementNode");r=dr(this),n.splice(r,0,e),t.selectEnd()}}var o}insertParagraph(){if("root"===this.anchor.key){var e=Yr();return $e().splice(this.anchor.offset,0,[e]),e.select(),e}var t=dr(this);if(!Pr(e=dt(this.anchor.getNode(),ut)))throw Error("Expected ancestor to be an ElementNode");return t=(t=e.getChildAtIndex(t))?[t,...t.getNextSiblings()]:[],(e=e.insertNewAfter(this,!1))?(e.append(...t),e.selectStart(),e):null}insertLineBreak(e){var t=hn();this.insertNodes([t]),e&&(e=t.getParentOrThrow(),t=t.getIndexWithinParent(),e.select(t,t))}extract(){var e=this.getNodes(),t=e.length,n=t-1,r=this.anchor;let i=this.focus;var l=e[0];let o=e[n],[s,a]=jn(this);return 0===t?[]:1===t?Mn(l)&&!this.isCollapsed()?(e=s>a?a:s,n=l.splitText(e,s>a?s:a),null!=(e=0===e?n[0]:n[1])?[e]:[]):[l]:(t=r.isBefore(i),Mn(l)&&((r=t?s:a)===l.getTextContentSize()?e.shift():0!==r&&([,l]=l.splitText(r),e[0]=l)),Mn(o)&&(l=o.getTextContent().length,0===(t=t?a:s)?e.pop():t!==l&&([o]=o.splitText(t),e[n]=o)),e)}modify(e,t,n){var r=this.focus,i=this.anchor,l="move"===e,o=Je(r,t);if(Rr(o)&&!o.isIsolated())l&&o.isKeyboardSelectable()?((t=tr()).add(o.__key),Ie(t)):Mn(e=t?o.getPreviousSibling():o.getNextSibling())?(o=e.__key,t=t?e.getTextContent().length:0,r.set(o,t,"text"),l&&i.set(o,t,"text")):(n=o.getParentOrThrow(),Pr(e)?(n=e.__key,o=t?e.getChildrenSize():0):(o=o.getIndexWithinParent(),n=n.__key,t||o++),r.set(n,o,"element"),l&&i.set(n,o,"element"));else if(r=ot((i=Cr())._window)){var s=i._blockCursorElement,a=i._rootElement;if(null===a||null===s||!Pr(o)||o.isInline()||o.canBeEmpty()||lt(s,i,a),r.modify(e,t?"backward":"forward",n),0<r.rangeCount&&(o=r.getRangeAt(0),i=Lr(i=this.anchor.getNode())?i:Ze(i),this.applyDOMRange(o),this.dirty=!0,!l)){for(l=this.getNodes(),e=[],n=!1,s=0;s<l.length;s++)Xe(a=l[s],i)?e.push(a):n=!0;n&&0<e.length&&(t?Pr(t=e[0])?t.selectStart():t.getParentOrThrow().selectStart():Pr(t=e[e.length-1])?t.selectEnd():t.getParentOrThrow().selectEnd()),r.anchorNode===o.startContainer&&r.anchorOffset===o.startOffset||(t=this.focus,r=(l=this.anchor).key,o=l.offset,i=l.type,zn(l,t.key,t.offset,t.type),zn(t,r,o,i),this._cachedNodes=null)}}}deleteCharacter(e){let t=this.isCollapsed();if(this.isCollapsed()){var r=this.anchor,i=this.focus,l=r.getNode();if(!e&&("element"===r.type&&Pr(l)&&r.offset===l.getChildrenSize()||"text"===r.type&&r.offset===l.getTextContentSize())){var o=l.getParent();if(Pr(o=l.getNextSibling()||(null===o?null:o.getNextSibling()))&&o.isShadowRoot())return}if(Rr(o=Je(i,e))&&!o.isIsolated())return void(o.isKeyboardSelectable()&&Pr(l)&&0===l.getChildrenSize()?(l.remove(),e=tr(),e.add(o.__key),Ie(e)):(o.remove(),Cr().dispatchCommand(n,void 0)));if(!e&&Pr(o)&&Pr(l)&&l.isEmpty())return l.remove(),void o.selectStart();if(this.modify("extend",e,"character"),this.isCollapsed()){if(e&&0===r.offset&&("element"===r.type?r.getNode():r.getNode().getParentOrThrow()).collapseAtStart(this))return}else{if(o="text"===i.type?i.getNode():null,l="text"===r.type?r.getNode():null,null!==o&&o.isSegmented()){if(r=i.offset,i=o.getTextContentSize(),o.is(l)||e&&r!==i||!e&&0!==r)return void Gn(o,e,r)}else if(null!==l&&l.isSegmented()&&(r=r.offset,i=l.getTextContentSize(),l.is(o)||e&&0!==r||!e&&r!==i))return void Gn(l,e,r);if(l=this.anchor,o=this.focus,(r=l.getNode())===(i=o.getNode())&&"text"===l.type&&"text"===o.type){var s=l.offset,a=o.offset;let t=s<a;(i=t?s:a)!==(s=(a=t?a:s)-1)&&(Fe(r=r.getTextContent().slice(i,a))||(e?o.offset=s:l.offset=s))}}}this.removeText(),e&&!t&&this.isCollapsed()&&"element"===this.anchor.type&&0===this.anchor.offset&&((e=this.anchor.getNode()).isEmpty()&&Lr(e.getParent())&&0===e.getIndexWithinParent()&&e.collapseAtStart(this))}deleteLine(e){this.isCollapsed()&&("text"===this.anchor.type&&this.modify("extend",e,"lineboundary"),0===(e?this.focus:this.anchor).offset&&this.modify("extend",e,"character")),this.removeText()}deleteWord(e){this.isCollapsed()&&this.modify("extend",e,"word"),this.removeText()}}function Jn(e){return e instanceof Kn}function Vn(e){let t=e.offset;return"text"===e.type?t:t===(e=e.getNode()).getChildrenSize()?e.getTextContent().length:0}function jn(e){let t=e.anchor;return e=e.focus,"element"===t.type&&"element"===e.type&&t.key===e.key&&t.offset===e.offset?[0,0]:[Vn(t),Vn(e)]}function Gn(e,t,n){let r=e.getTextContent().split(/(?=\s)/g),i=r.length,l=0,o=0;for(let s=0;s<i;s++){let e=s===i-1;if(o=l,l+=r[s].length,t&&l===n||l>n||e){r.splice(s,1),e&&(o=void 0);break}}""===(t=r.join("").trim())?e.remove():(e.setTextContent(t),e.select(o,o))}function qn(e,t,n,r){var i=t;if(1===e.nodeType){let s=!1;var l=e.childNodes,o=l.length;i===o&&(s=!0,i=o-1);let a=l[i];if(o=!1,a===r._blockCursorElement?(a=l[i+1],o=!0):null!==r._blockCursorElement&&i--,Mn(r=Le(a)))i=s?r.getTextContentSize():0;else{if(null===(l=Le(e)))return null;if(Pr(l)?((t=Pr(e=l.getChildAtIndex(i)))&&(t=e.getParent(),t=null===n||null===t||!t.canBeEmpty()||t!==n.getNode()),t&&(null===(n=s?e.getLastDescendant():e.getFirstDescendant())?(l=e,i=0):l=Pr(e=n)?e:e.getParentOrThrow()),Mn(e)?(r=e,l=null,i=s?e.getTextContentSize():0):e!==l&&s&&!o&&i++):(i=l.getIndexWithinParent(),i=0===t&&Rr(l)&&Le(e)===l?i:i+1,l=l.getParentOrThrow()),Pr(l))return In(l.__key,i,"element")}}else r=Le(e);return Mn(r)?In(r.__key,i,"text"):null}function Xn(e,t,n){var r=e.offset,i=e.getNode();0===r?(r=i.getPreviousSibling(),i=i.getParent(),t?(n||!t)&&null===r&&Pr(i)&&i.isInline()&&(Mn(t=i.getPreviousSibling())&&(e.key=t.__key,e.offset=t.getTextContent().length)):Pr(r)&&!n&&r.isInline()?(e.key=r.__key,e.offset=r.getChildrenSize(),e.type="element"):Mn(r)&&(e.key=r.__key,e.offset=r.getTextContent().length)):r===i.getTextContent().length&&(r=i.getNextSibling(),i=i.getParent(),t&&Pr(r)&&r.isInline()?(e.key=r.__key,e.offset=0,e.type="element"):(n||t)&&null===r&&Pr(i)&&i.isInline()&&!i.canInsertTextAfter()&&(Mn(t=i.getNextSibling())&&(e.key=t.__key,e.offset=0)))}function Qn(e,t,n){if("text"===e.type&&"text"===t.type){var r=e.isBefore(t);let i=e.is(t);Xn(e,r,i),Xn(t,!r,i),i&&(t.key=e.key,t.offset=e.offset,t.type=e.type),(r=Cr()).isComposing()&&r._compositionKey!==e.key&&Yn(n)&&(r=n.anchor,n=n.focus,zn(e,r.key,r.offset,r.type),zn(t,n.key,n.offset,n.type))}}function Zn(e,t,n,r,i,l){return null!==e&&null!==n&&xe(i,e,n)?null===(t=qn(e,t,Yn(l)?l.anchor:null,i))||null===(r=qn(n,r,Yn(l)?l.focus:null,i))||"element"===t.type&&"element"===r.type&&(e=Le(e),n=Le(n),Rr(e)&&Rr(n))?null:(Qn(t,r,l),[t,r]):null}function er(e,t,n,r,i,l){let o=xr();return(e=new Un(In(e,t,i),In(n,r,l),0,"")).dirty=!0,o._selection=e}function tr(){return new Kn(new Set)}function nr(e,t,n,r){var i=n._window;if(null===i)return null;var l=(i=r||i.event)?i.type:void 0;let o;if(r="selectionchange"===l,i=!le&&(r||"beforeinput"===l||"compositionstart"===l||"compositionend"===l||"click"===l&&i&&3===i.detail||"drop"===l||void 0===l),Yn(e)&&!i)return e.clone();if(null===t)return null;if(i=t.anchorNode,l=t.focusNode,o=t.anchorOffset,t=t.focusOffset,r&&Yn(e)&&!xe(n,i,l))return e.clone();if(null===(n=Zn(i,o,l,t,n,e)))return null;let[s,a]=n;return new Un(s,a,Yn(e)?e.format:0,Yn(e)?e.style:"")}function rr(){return xr()._selection}function ir(){return Cr()._editorState._selection}function lr(e,t,n,r=1){var i=e.anchor,l=e.focus,o=i.getNode(),s=l.getNode();if(t.is(o)||t.is(s)){if(o=t.__key,e.isCollapsed())(n<=(t=i.offset)&&0<r||n<t&&0>r)&&(n=Math.max(0,t+r),i.set(o,n,"element"),l.set(o,n,"element"),or(e));else{let u=e.isBackward();var a=(s=u?l:i).getNode();l=(i=u?i:l).getNode(),t.is(a)&&((n<=(a=s.offset)&&0<r||n<a&&0>r)&&s.set(o,Math.max(0,a+r),"element")),t.is(l)&&((n<=(t=i.offset)&&0<r||n<t&&0>r)&&i.set(o,Math.max(0,t+r),"element"))}or(e)}}function or(e){var t=e.anchor,n=t.offset;let r=e.focus;var i=r.offset,l=t.getNode(),o=r.getNode();if(e.isCollapsed())Pr(l)&&(Mn(o=(i=n>=(o=l.getChildrenSize()))?l.getChildAtIndex(o-1):l.getChildAtIndex(n))&&(n=0,i&&(n=o.getTextContentSize()),t.set(o.__key,n,"text"),r.set(o.__key,n,"text")));else{if(Pr(l)){let r=l.getChildrenSize();Mn(n=(e=n>=r)?l.getChildAtIndex(r-1):l.getChildAtIndex(n))&&(l=0,e&&(l=n.getTextContentSize()),t.set(n.__key,l,"text"))}Pr(o)&&(Mn(i=(t=i>=(n=o.getChildrenSize()))?o.getChildAtIndex(n-1):o.getChildAtIndex(i))&&(o=0,t&&(o=i.getTextContentSize()),r.set(i.__key,o,"text")))}}function sr(e,t,n,r,i){let l=null,o=0,s=null;null!==r?(l=r.__key,Mn(r)?(o=r.getTextContentSize(),s="text"):Pr(r)&&(o=r.getChildrenSize(),s="element")):null!==i&&(l=i.__key,Mn(i)?s="text":Pr(i)&&(s="element")),null!==l&&null!==s?e.set(l,o,s):(o=t.getIndexWithinParent(),-1===o&&(o=n.getChildrenSize()),e.set(n.__key,o,"element"))}function ar(e,t,n,r,i){"text"===e.type?(e.key=n,t||(e.offset+=i)):e.offset>r.getIndexWithinParent()&&--e.offset}function ur(e){e instanceof Jr||(e instanceof cn?Vr(e=st(e,Vr))||F(114):Vr(e=st(e.getNode(),Vr))||F(114));let t=e.getParent();Xr(t)||F(115);let n=t.getParent();return Gr(n)||F(116),[e,t,n]}function dr(e){e.isCollapsed()||e.removeText();var t=e.anchor;for(e=t.getNode(),t=t.offset;!ut(e);)[e,t]=cr(e,t);return t}function cr(e,t){var n=e.getParent();if(!n)return n=Yr(),$e().append(n),n.select(),[$e(),0];if(Mn(e)){var r=e.splitText(t);return 0===r.length?[n,e.getIndexWithinParent()]:(e=0===t?0:1,[n,e=r[0].getIndexWithinParent()+e])}return Pr(e)&&0!==t?((r=e.getChildAtIndex(t))&&(t=new Un(In(e.__key,t,"element"),In(e.__key,t,"element"),0,""),(t=e.insertNewAfter(t))&&t.append(r,...r.getNextSiblings())),[n,e.getIndexWithinParent()+1]):[n,e.getIndexWithinParent()]}let fr=null,gr=null,hr=!1,_r=!1,pr=0,mr={characterData:!0,childList:!0,subtree:!0};function yr(){return hr||null!==fr&&fr._readOnly}function vr(){hr&&F(13)}function xr(){return null===fr&&F(15),fr}function Cr(){return null===gr&&F(16),gr}function Nr(e,t,n){var r=t.__type;let i=e._nodes.get(r);for(void 0===i&&F(30,r),void 0===(e=n.get(r))&&(e=Array.from(i.transforms),n.set(r,e)),n=e.length,r=0;r<n&&(e[r](t),t.isAttached());r++);}function Tr(e,t){var n=e.type,r=t.get(n);if(void 0===r&&F(17,n),n=r.klass,e.type!==n.getType()&&F(18,n.name),n=n.importJSON(e),e=e.children,Pr(n)&&Array.isArray(e))for(r=0;r<e.length;r++){let i=Tr(e[r],t);n.append(i)}return n}function Er(e,t){let n=fr,r=hr,i=gr;fr=e,hr=!0,gr=null;try{return t()}finally{fr=n,hr=r,gr=i}}function Sr(e,t){let r=e._pendingEditorState,i=e._rootElement,l=e._headless||null===i;if(null!==r){var o=e._editorState,s=o._selection,a=r._selection,u=0!==e._dirtyType,d=fr,c=hr,f=gr,g=e._updating,h=e._observer,_=null;if(e._pendingEditorState=null,e._editorState=r,!l&&u&&null!==h){gr=e,fr=r,hr=!1,e._updating=!0;try{let t=e._dirtyType,n=e._dirtyElements,i=e._dirtyLeaves;h.disconnect();var p=n,m=i;Tt=Et=Nt="",St=2===t,Ot=null,gt=e,ft=e._config,ht=e._nodes,_t=gt._listeners.mutation,pt=p,mt=m,yt=o._nodeMap,vt=r._nodeMap,bt=r._readOnly,xt=new Map(e._keyToDOMMap);let l=new Map;Ct=l,Bt("root",null),Ct=xt=ft=vt=yt=mt=pt=ht=gt=void 0,_=l}catch(Z){if(Z instanceof Error&&e._onError(Z),_r)throw Z;return Hr(e,null,i,r),ce(e),e._dirtyType=2,_r=!0,Sr(e,o),void(_r=!1)}finally{h.observe(i,mr),e._updating=g,fr=d,hr=c,gr=f}}r._readOnly||(r._readOnly=!0);var y=e._dirtyLeaves,v=e._dirtyElements,x=e._normalizedNodes,C=e._updateTags,N=e._deferred;u&&(e._dirtyType=0,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements=new Map,e._normalizedNodes=new Set,e._updateTags=new Set);var T,E=e._decorators,S=e._pendingDecorators||E,b=r._nodeMap;for(T in S)b.has(T)||(S===E&&(S=Ae(e)),delete S[T]);var O=l?null:ot(e._window);if(e._editable&&null!==O&&(u||null===a||a.dirty)){gr=e,fr=r;try{if(null!==h&&h.disconnect(),u||null===a||a.dirty){let t=e._blockCursorElement;null!==t&&lt(t,e,i);e:{let t=O.anchorNode,n=O.focusNode,r=O.anchorOffset,l=O.focusOffset,o=document.activeElement;if(!(C.has("collaboration")&&o!==i||null!==o&&ve(o)))if(Yn(a)){var w=a.anchor,D=a.focus,k=w.key,M=D.key,R=Ge(e,k),A=Ge(e,M),P=w.offset,$=D.offset,I=a.format,L=a.style,F=a.isCollapsed(),B=R,z=A,W=!1;if("text"===w.type){B=Te(R);let e=w.getNode();W=e.getFormat()!==I||e.getStyle()!==L}else Yn(s)&&"text"===s.anchor.type&&(W=!0);if("text"===D.type&&(z=Te(A)),null!==B&&null!==z){if(F&&(null===s||W||Yn(s)&&(s.format!==I||s.style!==L))){var K=performance.now();en=[I,L,P,k,K]}if(r===P&&l===$&&t===B&&n===z&&("Range"!==O.type||!F)&&(null!==o&&i.contains(o)||i.focus({preventScroll:!0}),"element"!==w.type))break e;try{O.setBaseAndExtent(B,P,z,$)}catch(ee){}if(!C.has("skip-scroll-into-view")&&a.isCollapsed()&&null!==i&&i===document.activeElement){let t=a instanceof Un&&"element"===a.anchor.type?B.childNodes[P]||null:0<O.rangeCount?O.getRangeAt(0):null;if(null!==t){let n;if(t instanceof Text){let e=document.createRange();e.selectNode(t),n=e.getBoundingClientRect()}else n=t.getBoundingClientRect();let r=i.ownerDocument,l=r.defaultView;if(null!==l)for(var Y,H,{top:U,bottom:J}=n,V=i;null!==V;){let t=V===r.body;if(t)Y=0,H=Qe(e).innerHeight;else{let e=V.getBoundingClientRect();Y=e.top,H=e.bottom}let n=0;if(U<Y?n=-(Y-U):J>H&&(n=J-H),0!==n)if(t)l.scrollBy(0,n);else{let e=V.scrollTop;V.scrollTop+=n;let t=V.scrollTop-e;U-=t,J-=t}if(t)break;V=qe(V)}}}qt=!0}}else null!==s&&xe(e,t,n)&&O.removeAllRanges()}}e:{let t=e._blockCursorElement;if(Yn(a)&&a.isCollapsed()&&"element"===a.anchor.type&&i.contains(document.activeElement)){let n=a.anchor,r=n.getNode(),l=n.offset,o=r.getChildrenSize(),s=!1,u=null;if(l===o){it(r.getChildAtIndex(l-1))&&(s=!0)}else{let t=r.getChildAtIndex(l);if(it(t)){let n=t.getPreviousSibling();(null===n||it(n))&&(s=!0,u=e.getElementByKey(t.__key))}}if(s){let n=e.getElementByKey(r.__key);if(null===t){let n=e._config.theme,r=document.createElement("div");r.contentEditable="false",r.setAttribute("data-lexical-cursor","true");let i=n.blockCursor;if(void 0!==i){if("string"==typeof i){let e=i.split(" ");i=n.blockCursor=e}void 0!==i&&r.classList.add(...i)}e._blockCursorElement=t=r}i.style.caretColor="transparent",null===u?n.appendChild(t):n.insertBefore(t,u);break e}}null!==t&&lt(t,e,i)}null!==h&&h.observe(i,mr)}finally{gr=f,fr=d}}if(null!==_){var j=_;let t=Array.from(e._listeners.mutation),n=t.length;for(let e=0;e<n;e++){let[n,r]=t[e],i=j.get(r);void 0!==i&&n(i,{dirtyLeaves:y,prevEditorState:o,updateTags:C})}}Yn(a)||null===a||null!==s&&s.is(a)||e.dispatchCommand(n,void 0);var G=e._pendingDecorators;null!==G&&(e._decorators=G,e._pendingDecorators=null,br("decorator",e,!0,G));var q=Pe(t||o),X=Pe(r);if(q!==X&&br("textcontent",e,!0,X),br("update",e,!0,{dirtyElements:v,dirtyLeaves:y,editorState:r,normalizedNodes:x,prevEditorState:t||o,tags:C}),e._deferred=[],0!==N.length){let t=e._updating;e._updating=!0;try{for(let e=0;e<N.length;e++)N[e]()}finally{e._updating=t}}var Q=e._updates;if(0!==Q.length){let t=Q.shift();if(t){let[n,r]=t;Dr(e,n,r)}}}}function br(e,t,n,...r){let i=t._updating;t._updating=n;try{let n=Array.from(t._listeners[e]);for(e=0;e<n.length;e++)n[e].apply(null,r)}finally{t._updating=i}}function Or(e,t,n){if(!1===e._updating||gr!==e){let r=!1;return e.update((()=>{r=Or(e,t,n)})),r}let r=Be(e);for(let l=4;0<=l;l--)for(let o=0;o<r.length;o++){var i=r[o]._commands.get(t);if(void 0!==i&&void 0!==(i=i[l])){let t=(i=Array.from(i)).length;for(let r=0;r<t;r++)if(!0===i[r](n,e))return!0}}return!1}function wr(e,t){let n=e._updates;for(t=t||!1;0!==n.length;){var r=n.shift();if(r){let n,[i,l]=r;void 0!==l&&(r=l.onUpdate,n=l.tag,l.skipTransforms&&(t=!0),r&&e._deferred.push(r),n&&e._updateTags.add(n)),i()}}return t}function Dr(e,t,n){let r=e._updateTags;var i,l=i=!1;if(void 0!==n){var o=n.onUpdate;null!=(i=n.tag)&&r.add(i),i=n.skipTransforms||!1,l=n.discrete||!1}o&&e._deferred.push(o),n=e._editorState;let s=!1;(null===(o=e._pendingEditorState)||o._readOnly)&&(o=e._pendingEditorState=new zr(new Map((o||n)._nodeMap)),s=!0),o._flushSync=l,l=fr;let a=hr,u=gr,d=e._updating;fr=o,hr=!1,e._updating=!0,gr=e;try{s&&(e._headless?null!=n._selection&&(o._selection=n._selection.clone()):o._selection=function(e){let t=e.getEditorState()._selection,n=ot(e._window);return Yn(t)||null==t?nr(t,n,e,null):t.clone()}(e));let r=e._compositionKey;t(),i=wr(e,i),function(e,t){if(t=t.getEditorState()._selection,Yn(e=e._selection)){var n=e.anchor;let r,i=e.focus;"text"===n.type&&(r=n.getNode(),r.selectionTransform(t,e)),"text"===i.type&&r!==(n=i.getNode())&&n.selectionTransform(t,e)}}(o,e),0!==e._dirtyType&&(i?function(e,t){t=t._dirtyLeaves,e=e._nodeMap;for(let n of t)Mn(t=e.get(n))&&t.isAttached()&&t.isSimpleText()&&!t.isUnmergeable()&&he(t)}(o,e):function(e,t){let n=t._dirtyLeaves,r=t._dirtyElements;e=e._nodeMap;let i=De(),l=new Map;var o=n;let s=o.size;for(var a=r,u=a.size;0<s||0<u;){if(0<s){t._dirtyLeaves=new Set;for(let r of o)Mn(o=e.get(r))&&o.isAttached()&&o.isSimpleText()&&!o.isUnmergeable()&&he(o),void 0!==o&&void 0!==o&&o.__key!==i&&o.isAttached()&&Nr(t,o,l),n.add(r);if(s=(o=t._dirtyLeaves).size,0<s){pr++;continue}}t._dirtyLeaves=new Set,t._dirtyElements=new Map;for(let n of a)a=n[0],u=n[1],("root"===a||u)&&(void 0!==(o=e.get(a))&&void 0!==o&&o.__key!==i&&o.isAttached()&&Nr(t,o,l),r.set(a,u));s=(o=t._dirtyLeaves).size,u=(a=t._dirtyElements).size,pr++}t._dirtyLeaves=n,t._dirtyElements=r}(o,e),wr(e),function(e,t,n,r){e=e._nodeMap,t=t._nodeMap;let i=[];for(let[l]of r){let n=t.get(l);void 0===n||n.isAttached()||(Pr(n)&&ct(n,l,e,t,i,r),e.has(l)||r.delete(l),i.push(l))}for(let l of i)t.delete(l);for(let l of n)void 0===(r=t.get(l))||r.isAttached()||(e.has(l)||n.delete(l),t.delete(l))}(n,o,e._dirtyLeaves,e._dirtyElements)),r!==e._compositionKey&&(o._flushSync=!0);let l=o._selection;if(Yn(l)){let e=o._nodeMap,t=l.focus.key;void 0!==e.get(l.anchor.key)&&void 0!==e.get(t)||F(19)}else Jn(l)&&0===l._nodes.size&&(o._selection=null)}catch(c){return c instanceof Error&&e._onError(c),e._pendingEditorState=n,e._dirtyType=2,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),void Sr(e)}finally{fr=l,hr=a,gr=u,e._updating=d,pr=0}0!==e._dirtyType||function(e,t){if(t=t.getEditorState()._selection,e=e._selection,null!==e){if(e.dirty||!e.is(t))return!0}else if(null!==t)return!0;return!1}(o,e)?o._flushSync?(o._flushSync=!1,Sr(e)):s&&ye((()=>{Sr(e)})):(o._flushSync=!1,s&&(r.clear(),e._deferred=[],e._pendingEditorState=null))}function kr(e,t,n){e._updating?e._updates.push([t,n]):Dr(e,t,n)}class Mr extends cn{constructor(e){super(e)}decorate(){F(47)}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function Rr(e){return e instanceof Mr}class Ar extends cn{constructor(e){super(e),this.__last=this.__first=null,this.__indent=this.__format=this.__size=0,this.__dir=null}getFormat(){return this.getLatest().__format}getFormatType(){let e=this.getFormat();return ne[e]||""}getIndent(){return this.getLatest().__indent}getChildren(){let e=[],t=this.getFirstChild();for(;null!==t;)e.push(t),t=t.getNextSibling();return e}getChildrenKeys(){let e=[],t=this.getFirstChild();for(;null!==t;)e.push(t.__key),t=t.getNextSibling();return e}getChildrenSize(){return this.getLatest().__size}isEmpty(){return 0===this.getChildrenSize()}isDirty(){let e=Cr()._dirtyElements;return null!==e&&e.has(this.__key)}isLastChild(){let e=this.getLatest(),t=this.getParentOrThrow().getLastChild();return null!==t&&t.is(e)}getAllTextNodes(){let e=[],t=this.getFirstChild();for(;null!==t;){if(Mn(t)&&e.push(t),Pr(t)){let n=t.getAllTextNodes();e.push(...n)}t=t.getNextSibling()}return e}getFirstDescendant(){let e=this.getFirstChild();for(;null!==e;){if(Pr(e)){let t=e.getFirstChild();if(null!==t){e=t;continue}}break}return e}getLastDescendant(){let e=this.getLastChild();for(;null!==e;){if(Pr(e)){let t=e.getLastChild();if(null!==t){e=t;continue}}break}return e}getDescendantByIndex(e){let t=this.getChildren(),n=t.length;return e>=n?Pr(e=t[n-1])&&e.getLastDescendant()||e||null:Pr(e=t[e])&&e.getFirstDescendant()||e||null}getFirstChild(){let e=this.getLatest().__first;return null===e?null:ke(e)}getFirstChildOrThrow(){let e=this.getFirstChild();return null===e&&F(45,this.__key),e}getLastChild(){let e=this.getLatest().__last;return null===e?null:ke(e)}getLastChildOrThrow(){let e=this.getLastChild();return null===e&&F(96,this.__key),e}getChildAtIndex(e){var t=this.getChildrenSize();let n;if(e<t/2){for(n=this.getFirstChild(),t=0;null!==n&&t<=e;){if(t===e)return n;n=n.getNextSibling(),t++}return null}for(n=this.getLastChild(),--t;null!==n&&t>=e;){if(t===e)return n;n=n.getPreviousSibling(),t--}return null}getTextContent(){let e="",t=this.getChildren(),n=t.length;for(let r=0;r<n;r++){let i=t[r];e+=i.getTextContent(),Pr(i)&&r!==n-1&&!i.isInline()&&(e+="\n\n")}return e}getTextContentSize(){let e=0,t=this.getChildren(),n=t.length;for(let r=0;r<n;r++){let i=t[r];e+=i.getTextContentSize(),Pr(i)&&r!==n-1&&!i.isInline()&&(e+=2)}return e}getDirection(){return this.getLatest().__dir}hasFormat(e){return""!==e&&(e=te[e],!!(this.getFormat()&e))}select(e,t){vr();let n=rr(),r=e,i=t;var l=this.getChildrenSize();if(!this.canBeEmpty())if(0===e&&0===t){if(Mn(e=this.getFirstChild())||Pr(e))return e.select(0,0)}else if(!(void 0!==e&&e!==l||void 0!==t&&t!==l)&&(Mn(e=this.getLastChild())||Pr(e)))return e.select();return void 0===r&&(r=l),void 0===i&&(i=l),l=this.__key,Yn(n)?(n.anchor.set(l,r,"element"),n.focus.set(l,i,"element"),n.dirty=!0,n):er(l,r,l,i,"element","element")}selectStart(){let e=this.getFirstDescendant();return e?e.selectStart():this.select()}selectEnd(){let e=this.getLastDescendant();return e?e.selectEnd():this.select()}clear(){let e=this.getWritable();return this.getChildren().forEach((e=>e.remove())),e}append(...e){return this.splice(this.getChildrenSize(),0,e)}setDirection(e){let t=this.getWritable();return t.__dir=e,t}setFormat(e){return this.getWritable().__format=""!==e?te[e]:0,this}setIndent(e){return this.getWritable().__indent=e,this}splice(e,t,n){let r=n.length,i=this.getChildrenSize(),l=this.getWritable(),o=l.__key;var s=[],a=[];let u=this.getChildAtIndex(e+t),d=null,c=i-t+r;if(0!==e)if(e===i)d=this.getLastChild();else{var f=this.getChildAtIndex(e);null!==f&&(d=f.getPreviousSibling())}if(0<t){var g=null===d?this.getFirstChild():d.getNextSibling();for(f=0;f<t;f++){null===g&&F(100);var h=g.getNextSibling(),_=g.__key;be(g=g.getWritable()),a.push(_),g=h}}for(f=d,h=0;h<r;h++){_=n[h],null!==f&&_.is(f)&&(d=f=f.getPreviousSibling()),(g=_.getWritable()).__parent===o&&c--,be(g);let e=_.__key;null===f?(l.__first=e,g.__prev=null):((f=f.getWritable()).__next=e,g.__prev=f.__key),_.__key===o&&F(76),g.__parent=o,s.push(e),f=_}if(e+t===i?null!==f&&(f.getWritable().__next=null,l.__last=f.__key):null!==u&&(e=u.getWritable(),null!==f?(t=f.getWritable(),e.__prev=f.__key,t.__next=u.__key):e.__prev=null),l.__size=c,a.length&&Yn(e=rr())){a=new Set(a),s=new Set(s);let{anchor:t,focus:n}=e;$r(t,a,s)&&sr(t,t.getNode(),this,d,u),$r(n,a,s)&&sr(n,n.getNode(),this,d,u),0!==c||this.canBeEmpty()||et(this)||this.remove()}return l}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"element",version:1}}insertNewAfter(){return null}canIndent(){return!0}collapseAtStart(){return!1}excludeFromCopy(){return!1}canExtractContents(){return!0}canReplaceWith(){return!0}canInsertAfter(){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(){return!1}extractWithChild(){return!1}}function Pr(e){return e instanceof Ar}function $r(e,t,n){for(e=e.getNode();e;){let r=e.__key;if(t.has(r)&&!n.has(r))return!0;e=e.getParent()}return!1}class Ir extends Ar{static getType(){return"root"}static clone(){return new Ir}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){F(51)}getTextContent(){let e=this.__cachedText;return!yr()&&0!==Cr()._dirtyType||null===e?super.getTextContent():e}remove(){F(52)}replace(){F(53)}insertBefore(){F(54)}insertAfter(){F(55)}updateDOM(){return!1}append(...e){for(let t=0;t<e.length;t++){let n=e[t];Pr(n)||Rr(n)||F(56)}return super.append(...e)}static importJSON(e){let t=$e();return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"root",version:1}}collapseAtStart(){return!0}}function Lr(e){return e instanceof Ir}function Fr(){return new zr(new Map([["root",new Ir]]))}function Br(e){let t=e.exportJSON();var n=e.constructor;if(t.type!==n.getType()&&F(130,n.name),Pr(e)){let r=t.children;for(Array.isArray(r)||F(59,n.name),e=e.getChildren(),n=0;n<e.length;n++){let t=Br(e[n]);r.push(t)}}return t}class zr{constructor(e,t){this._nodeMap=e,this._selection=t||null,this._readOnly=this._flushSync=!1}isEmpty(){return 1===this._nodeMap.size&&null===this._selection}read(e){return Er(this,e)}clone(e){return(e=new zr(this._nodeMap,void 0===e?this._selection:e))._readOnly=!0,e}toJSON(){return Er(this,(()=>({root:Br($e())})))}}class Wr extends Ar{static getType(){return"paragraph"}static clone(e){return new Wr(e.__key)}createDOM(e){let t=document.createElement("p");return void 0!==(e=Ye(e.theme,"paragraph"))&&t.classList.add(...e),t}updateDOM(){return!1}static importDOM(){return{p:()=>({conversion:Kr,priority:0})}}exportDOM(e){if(({element:e}=super.exportDOM(e)),e&&at(e)){this.isEmpty()&&e.append(document.createElement("br"));var t=this.getFormatType();e.style.textAlign=t,(t=this.getDirection())&&(e.dir=t),0<(t=this.getIndent())&&(e.style.textIndent=20*t+"px")}return{element:e}}static importJSON(e){let t=Yr();return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{...super.exportJSON(),type:"paragraph",version:1}}insertNewAfter(e,t){e=Yr();let n=this.getDirection();return e.setDirection(n),this.insertAfter(e,t),e}collapseAtStart(){let e=this.getChildren();if(0===e.length||Mn(e[0])&&""===e[0].getTextContent().trim()){if(null!==this.getNextSibling())return this.selectNext(),this.remove(),!0;if(null!==this.getPreviousSibling())return this.selectPrevious(),this.remove(),!0}return!1}}function Kr(e){let t=Yr();return e.style&&(t.setFormat(e.style.textAlign),0<(e=parseInt(e.style.textIndent,10)/20)&&t.setIndent(e)),{node:t}}function Yr(){return nt(new Wr)}function Hr(e,t,n,r){let i=e._keyToDOMMap;i.clear(),e._editorState=Fr(),e._pendingEditorState=r,e._compositionKey=null,e._dirtyType=0,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),e._normalizedNodes=new Set,e._updateTags=new Set,e._updates=[],e._blockCursorElement=null,null!==(r=e._observer)&&(r.disconnect(),e._observer=null),null!==t&&(t.textContent=""),null!==n&&(n.textContent="",i.set("root",n))}class Ur{constructor(e,t,n,r,i,l,o){this._parentEditor=t,this._rootElement=null,this._editorState=e,this._compositionKey=this._pendingEditorState=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=r,this._nodes=n,this._decorators={},this._pendingDecorators=null,this._dirtyType=0,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=ze(),this._onError=i,this._htmlConversions=l,this._editable=o,this._headless=null!==t&&t._headless,this._blockCursorElement=this._window=null}isComposing(){return null!=this._compositionKey}registerUpdateListener(e){let t=this._listeners.update;return t.add(e),()=>{t.delete(e)}}registerEditableListener(e){let t=this._listeners.editable;return t.add(e),()=>{t.delete(e)}}registerDecoratorListener(e){let t=this._listeners.decorator;return t.add(e),()=>{t.delete(e)}}registerTextContentListener(e){let t=this._listeners.textcontent;return t.add(e),()=>{t.delete(e)}}registerRootListener(e){let t=this._listeners.root;return e(this._rootElement,null),t.add(e),()=>{e(null,this._rootElement),t.delete(e)}}registerCommand(e,t,n){void 0===n&&F(35);let r=this._commands;r.has(e)||r.set(e,[new Set,new Set,new Set,new Set,new Set]);let i=r.get(e);void 0===i&&F(36,String(e));let l=i[n];return l.add(t),()=>{l.delete(t),i.every((e=>0===e.size))&&r.delete(e)}}registerMutationListener(e,t){void 0===this._nodes.get(e.getType())&&F(37,e.name);let n=this._listeners.mutation;return n.set(t,e),()=>{n.delete(t)}}registerNodeTransformToKlass(e,t){var n=e.getType();return void 0===(n=this._nodes.get(n))&&F(37,e.name),n.transforms.add(t),n}registerNodeTransform(e,t){var n=this.registerNodeTransformToKlass(e,t);let r=[n];return null!=(n=n.replaceWithKlass)&&(n=this.registerNodeTransformToKlass(n,t),r.push(n)),function(e,t){kr(e,(()=>{var e=xr();if(!e.isEmpty())if("root"===t)$e().markDirty();else{e=e._nodeMap;for(let[,t]of e)t.markDirty()}}),null===e._pendingEditorState?{tag:"history-merge"}:void 0)}(this,e.getType()),()=>{r.forEach((e=>e.transforms.delete(t)))}}hasNode(e){return this._nodes.has(e.getType())}hasNodes(e){return e.every(this.hasNode.bind(this))}dispatchCommand(e,t){return Or(this,e,t)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(e){let t=this._rootElement;if(e!==t){let l=Ye(this._config.theme,"root");var n=this._pendingEditorState||this._editorState;if(this._rootElement=e,Hr(this,t,e,n),null!==t){if(!this._config.disableEvents){0!==Gt&&(Gt--,0===Gt&&t.ownerDocument.removeEventListener("selectionchange",un));var r=t.__lexicalEditor;if(null!=r){if(null!==r._parentEditor){var i=Be(r);i=i[i.length-1]._key,an.get(i)===r&&an.delete(i)}else an.delete(r._key);t.__lexicalEditor=null}for(r=sn(t),i=0;i<r.length;i++)r[i]();t.__lexicalEventHandles=[]}null!=l&&t.classList.remove(...l)}null!==e?(n=(n=e.ownerDocument)&&n.defaultView||null,(r=e.style).userSelect="text",r.whiteSpace="pre-wrap",r.wordBreak="break-word",e.setAttribute("data-lexical-editor","true"),this._window=n,this._dirtyType=2,ce(this),this._updateTags.add("history-merge"),Sr(this),this._config.disableEvents||function(e,t){0===Gt&&e.ownerDocument.addEventListener("selectionchange",un),Gt++,e.__lexicalEditor=t;let n=sn(e);for(let r=0;r<Ht.length;r++){let[i,l]=Ht[r],o="function"==typeof l?e=>{!0!==e._lexicalHandled&&(e._lexicalHandled=!0,t.isEditable()&&l(e,t))}:e=>{if(!0!==e._lexicalHandled&&(e._lexicalHandled=!0,t.isEditable()))switch(i){case"cut":return Or(t,A,e);case"copy":return Or(t,R,e);case"paste":return Or(t,a,e);case"dragstart":return Or(t,D,e);case"dragover":return Or(t,k,e);case"dragend":return Or(t,M,e);case"focus":return Or(t,$,e);case"blur":return Or(t,I,e);case"drop":return Or(t,w,e)}};e.addEventListener(i,o),n.push((()=>{e.removeEventListener(i,o)}))}}(e,this),null!=l&&e.classList.add(...l)):(this._editorState=n,this._window=this._pendingEditorState=null),br("root",this,!1,e,t)}}getElementByKey(e){return this._keyToDOMMap.get(e)||null}getEditorState(){return this._editorState}setEditorState(e,t){e.isEmpty()&&F(38),de(this);let n=this._pendingEditorState,r=this._updateTags;t=void 0!==t?t.tag:null,null===n||n.isEmpty()||(null!=t&&r.add(t),Sr(this)),this._pendingEditorState=e,this._dirtyType=2,this._dirtyElements.set("root",!1),this._compositionKey=null,null!=t&&r.add(t),Sr(this)}parseEditorState(e,t){e="string"==typeof e?JSON.parse(e):e;let n=Fr(),r=fr,i=hr,l=gr,o=this._dirtyElements,s=this._dirtyLeaves,a=this._cloneNotNeeded,u=this._dirtyType;this._dirtyElements=new Map,this._dirtyLeaves=new Set,this._cloneNotNeeded=new Set,this._dirtyType=0,fr=n,hr=!1,gr=this;try{Tr(e.root,this._nodes),t&&t(),n._readOnly=!0}catch(d){d instanceof Error&&this._onError(d)}finally{this._dirtyElements=o,this._dirtyLeaves=s,this._cloneNotNeeded=a,this._dirtyType=u,fr=r,hr=i,gr=l}return n}update(e,t){kr(this,e,t)}focus(e,t={}){let n=this._rootElement;null!==n&&(n.setAttribute("autocapitalize","off"),kr(this,(()=>{let e=rr(),n=$e();null!==e?e.dirty=!0:0!==n.getChildrenSize()&&("rootStart"===t.defaultSelection?n.selectStart():n.selectEnd())}),{onUpdate:()=>{n.removeAttribute("autocapitalize"),e&&e()},tag:"focus"}),null===this._pendingEditorState&&n.removeAttribute("autocapitalize"))}blur(){var e=this._rootElement;null!==e&&e.blur(),null!==(e=ot(this._window))&&e.removeAllRanges()}isEditable(){return this._editable}setEditable(e){this._editable!==e&&(this._editable=e,br("editable",this,!0,e))}toJSON(){return{editorState:this._editorState.toJSON()}}}class Jr extends Ar{constructor(e,t){super(t),this.__colSpan=e,this.__rowSpan=1}exportJSON(){return{...super.exportJSON(),colSpan:this.__colSpan,rowSpan:this.__rowSpan}}getColSpan(){return this.__colSpan}setColSpan(e){return this.getWritable().__colSpan=e,this}getRowSpan(){return this.__rowSpan}setRowSpan(e){return this.getWritable().__rowSpan=e,this}}function Vr(e){return e instanceof Jr}class jr extends Ar{}function Gr(e){return e instanceof jr}class qr extends Ar{}function Xr(e){return e instanceof qr}t.$INTERNAL_isPointSelection=Hn,t.$addUpdateTag=function(e){vr(),Cr()._updateTags.add(e)},t.$applyNodeReplacement=nt,t.$copyNode=tt,t.$createLineBreakNode=hn,t.$createNodeSelection=tr,t.$createParagraphNode=Yr,t.$createPoint=In,t.$createRangeSelection=function(){let e=In("root",0,"element"),t=In("root",0,"element");return new Un(e,t,0,"")},t.$createTabNode=An,t.$createTextNode=kn,t.$getAdjacentNode=Je,t.$getNearestNodeFromDOMNode=Re,t.$getNearestRootOrShadowRoot=Ze,t.$getNodeByKey=ke,t.$getPreviousSelection=ir,t.$getRoot=$e,t.$getSelection=rr,t.$getTextContent=function(){let e=rr();return null===e?"":e.getTextContent()},t.$hasAncestor=Xe,t.$hasUpdateTag=function(e){return Cr()._updateTags.has(e)},t.$insertNodes=function(e){let t=rr()||ir();null===t&&(t=$e().selectEnd()),t.insertNodes(e)},t.$isBlockElementNode=function(e){return Pr(e)&&!e.isInline()},t.$isDecoratorNode=Rr,t.$isElementNode=Pr,t.$isInlineElementOrDecoratorNode=function(e){return Pr(e)&&e.isInline()||Rr(e)&&e.isInline()},t.$isLeafNode=function(e){return Mn(e)||_n(e)||Rr(e)},t.$isLineBreakNode=_n,t.$isNodeSelection=Jn,t.$isParagraphNode=function(e){return e instanceof Wr},t.$isRangeSelection=Yn,t.$isRootNode=Lr,t.$isRootOrShadowRoot=et,t.$isTabNode=Pn,t.$isTextNode=Mn,t.$nodesOfType=function(e){var t=xr();let n=t._readOnly,r=e.getType();t=t._nodeMap;let i=[];for(let[,l]of t)l instanceof e&&l.__type===r&&(n||l.isAttached())&&i.push(l);return i},t.$normalizeSelection__EXPERIMENTAL=_e,t.$parseSerializedNode=function(e){return Tr(e,Cr()._nodes)},t.$selectAll=function(){var e=$e();Ie(_e(e=e.select(0,e.getChildrenSize())))},t.$setCompositionKey=we,t.$setSelection=Ie,t.$splitNode=function(e,t){let n=e.getChildAtIndex(t);null==n&&(n=e),et(e)&&F(102);let r=e=>{const t=e.getParentOrThrow(),i=et(t),l=e!==n||i?tt(e):e;if(i){if(!Pr(e)||!Pr(l))throw Error("Children of a root must be ElementNode");return e.insertAfter(l),[e,l,l]}const[o,s,a]=r(t);return e=e.getNextSiblings(),a.append(l,...e),[o,s,l]},[i,l]=r(n);return[i,l]},t.BLUR_COMMAND=I,t.CAN_REDO_COMMAND={},t.CAN_UNDO_COMMAND={},t.CLEAR_EDITOR_COMMAND={},t.CLEAR_HISTORY_COMMAND={},t.CLICK_COMMAND=r,t.COMMAND_PRIORITY_CRITICAL=4,t.COMMAND_PRIORITY_EDITOR=0,t.COMMAND_PRIORITY_HIGH=3,t.COMMAND_PRIORITY_LOW=1,t.COMMAND_PRIORITY_NORMAL=2,t.CONTROLLED_TEXT_INSERTION_COMMAND=s,t.COPY_COMMAND=R,t.CUT_COMMAND=A,t.DELETE_CHARACTER_COMMAND=i,t.DELETE_LINE_COMMAND=c,t.DELETE_WORD_COMMAND=d,t.DEPRECATED_$computeGridMap=function(e,t,n){let r=[],i=null,l=null;e=e.getChildren();for(let d=0;d<e.length;d++){var o=e[d];Xr(o)||F(108);var s=o.getChildren();o=0;for(let e of s){for(Vr(e)||F(109);void 0!==r[d]&&void 0!==r[d][o];)o++;var a=o,u=e;let c={cell:u,startColumn:a,startRow:s=d},f=u.__rowSpan,g=u.__colSpan;for(let e=0;e<f;e++){void 0===r[s+e]&&(r[s+e]=[]);for(let t=0;t<g;t++)r[s+e][a+t]=c}t.is(u)&&(i=c),n.is(u)&&(l=c),o+=e.__colSpan}}return null===i&&F(110),null===l&&F(111),[r,i,l]},t.DEPRECATED_$getGridCellNodeRect=function(e){let[t,,n]=ur(e),r=(e=n.getChildren()).length;var i=e[0].getChildren().length;let l=Array(r);for(var o=0;o<r;o++)l[o]=Array(i);for(i=0;i<r;i++){o=e[i].getChildren();let n=0;for(let e=0;e<o.length;e++){for(;l[i][n];)n++;let r=o[e],s=r.__rowSpan||1,a=r.__colSpan||1;for(let e=0;e<s;e++)for(let t=0;t<a;t++)l[i+e][n+t]=r;if(t===r)return{colSpan:a,columnIndex:n,rowIndex:i,rowSpan:s};n+=a}}return null},t.DEPRECATED_$getNodeTriplet=ur,t.DEPRECATED_$isGridCellNode=Vr,t.DEPRECATED_$isGridNode=Gr,t.DEPRECATED_$isGridRowNode=Xr,t.DEPRECATED_GridCellNode=Jr,t.DEPRECATED_GridNode=jr,t.DEPRECATED_GridRowNode=qr,t.DRAGEND_COMMAND=M,t.DRAGOVER_COMMAND=k,t.DRAGSTART_COMMAND=D,t.DROP_COMMAND=w,t.DecoratorNode=Mr,t.ElementNode=Ar,t.FOCUS_COMMAND=$,t.FORMAT_ELEMENT_COMMAND={},t.FORMAT_TEXT_COMMAND=f,t.INDENT_CONTENT_COMMAND={},t.INSERT_LINE_BREAK_COMMAND=l,t.INSERT_PARAGRAPH_COMMAND=o,t.INSERT_TAB_COMMAND={},t.INTERNAL_PointSelection=Wn,t.KEY_ARROW_DOWN_COMMAND=C,t.KEY_ARROW_LEFT_COMMAND=y,t.KEY_ARROW_RIGHT_COMMAND=p,t.KEY_ARROW_UP_COMMAND=x,t.KEY_BACKSPACE_COMMAND=E,t.KEY_DELETE_COMMAND=b,t.KEY_DOWN_COMMAND=_,t.KEY_ENTER_COMMAND=N,t.KEY_ESCAPE_COMMAND=S,t.KEY_MODIFIER_COMMAND=L,t.KEY_SPACE_COMMAND=T,t.KEY_TAB_COMMAND=O,t.LineBreakNode=fn,t.MOVE_TO_END=m,t.MOVE_TO_START=v,t.OUTDENT_CONTENT_COMMAND={},t.PASTE_COMMAND=a,t.ParagraphNode=Wr,t.REDO_COMMAND=h,t.REMOVE_TEXT_COMMAND=u,t.RootNode=Ir,t.SELECTION_CHANGE_COMMAND=n,t.SELECTION_INSERT_CLIPBOARD_NODES_COMMAND={},t.SELECT_ALL_COMMAND=P,t.TabNode=Rn,t.TextNode=Cn,t.UNDO_COMMAND=g,t.createCommand=function(){return{}},t.createEditor=function(e){var t=e||{},n=gr,r=t.theme||{};let i=void 0===e?n:t.parentEditor||null,l=t.disableEvents||!1,o=Fr(),s=t.namespace||(null!==i?i._config.namespace:ze()),a=t.editorState,u=[Ir,Cn,fn,Rn,Wr,...t.nodes||[]],{onError:d,html:c}=t;if(t=void 0===t.editable||t.editable,void 0===e&&null!==n)e=n._nodes;else for(e=new Map,n=0;n<u.length;n++){let t=u[n],r=null;var f=null;"function"!=typeof t&&(t=(f=t).replace,r=f.with,f=f.withKlass||null);let i=t.getType(),l=t.transform(),o=new Set;null!==l&&o.add(l),e.set(i,{exportDOM:c&&c.export?c.export.get(t):void 0,klass:t,replace:r,replaceWithKlass:f,transforms:o})}return r=new Ur(o,i,e,{disableEvents:l,namespace:s,theme:r},d||console.error,function(e,t){let n=new Map,r=new Set,i=e=>{Object.keys(e).forEach((t=>{let r=n.get(t);void 0===r&&(r=[],n.set(t,r)),r.push(e[t])}))};return e.forEach((e=>{null==(e=null!=e.klass.importDOM?e.klass.importDOM.bind(e.klass):null)||r.has(e)||(r.add(e),null!==(e=e())&&i(e))})),t&&i(t),n}(e,c?c.import:void 0),t),void 0!==a&&(r._pendingEditorState=a,r._dirtyType=2),r},t.getNearestEditorFromDOMNode=Ce,t.isCurrentlyReadOnlyMode=yr,t.isHTMLAnchorElement=function(e){return at(e)&&"A"===e.tagName},t.isHTMLElement=at,t.isSelectionCapturedInDecoratorInput=ve,t.isSelectionWithinEditor=xe},21364:(e,t,n)=>{const r=n(63205);e.exports=r},23918:(e,t,n)=>{var r=n(76401),i=n(30758);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l.apply(this,arguments)}var o="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?i.useLayoutEffect:i.useEffect;t.ContentEditable=function({ariaActiveDescendant:e,ariaAutoComplete:t,ariaControls:n,ariaDescribedBy:s,ariaExpanded:a,ariaLabel:u,ariaLabelledBy:d,ariaMultiline:c,ariaOwns:f,ariaRequired:g,autoCapitalize:h,className:_,id:p,role:m="textbox",spellCheck:y=!0,style:v,tabIndex:x,"data-testid":C,...N}){let[T]=r.useLexicalComposerContext(),[E,S]=i.useState(!1),b=i.useCallback((e=>{T.setRootElement(e)}),[T]);return o((()=>(S(T.isEditable()),T.registerEditableListener((e=>{S(e)})))),[T]),i.createElement("div",l({},N,{"aria-activedescendant":E?e:void 0,"aria-autocomplete":E?t:"none","aria-controls":E?n:void 0,"aria-describedby":s,"aria-expanded":E&&"combobox"===m?!!a:void 0,"aria-label":u,"aria-labelledby":d,"aria-multiline":c,"aria-owns":E?f:void 0,"aria-readonly":!E||void 0,"aria-required":g,autoCapitalize:h,className:_,contentEditable:E,"data-testid":C,id:p,ref:b,role:m,spellCheck:y,style:v,tabIndex:x}))}},26406:(e,t,n)=>{var r=n(30758);let i=r.createContext(null);t.LexicalComposerContext=i,t.createLexicalComposerContext=function(e,t){let n=null;return null!=e&&(n=e[1]),{getTheme:function(){return null!=t?t:null!=n?n.getTheme():null}}},t.useLexicalComposerContext=function(){let e=r.useContext(i);return null==e&&function(e){let t=new URLSearchParams;t.append("code",e);for(let n=1;n<arguments.length;n++)t.append("v",arguments[n]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(8),e}},28749:(e,t,n)=>{var r=n(76401),i=n(48885),l=n(30758),o=n(44555),s=n(87109),a=n(8143),u=n(85855),d=n(17685),c="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?l.useLayoutEffect:l.useEffect;function f(e){return e.getEditorState().read(o.$canShowPlaceholderCurry(e.isComposing()))}function g({content:e}){var[t]=r.useLexicalComposerContext();t=function(e){let[t,n]=l.useState((()=>f(e)));return c((()=>{function t(){let t=f(e);n(t)}return t(),s.mergeRegister(e.registerUpdateListener((()=>{t()})),e.registerEditableListener((()=>{t()})))}),[e]),t}(t);let n=i();return t?"function"==typeof e?e(n):e:null}t.PlainTextPlugin=function({contentEditable:e,placeholder:t,ErrorBoundary:n}){let[i]=r.useLexicalComposerContext();return n=function(e,t){let[n,r]=l.useState((()=>e.getDecorators()));return c((()=>e.registerDecoratorListener((e=>{a.flushSync((()=>{r(e)}))}))),[e]),l.useEffect((()=>{r(e.getDecorators())}),[e]),l.useMemo((()=>{let r=[],i=Object.keys(n);for(let o=0;o<i.length;o++){let s=i[o],u=l.createElement(t,{onError:t=>e._onError(t)},l.createElement(l.Suspense,{fallback:null},n[s])),d=e.getElementByKey(s);null!==d&&r.push(a.createPortal(u,d,s))}return r}),[t,n,e])}(i,n),function(e){c((()=>s.mergeRegister(d.registerPlainText(e),u.registerDragonSupport(e))),[e])}(i),l.createElement(l.Fragment,null,e,l.createElement(g,{content:t}),n)}},34706:(e,t,n)=>{const r=n(69707);e.exports=r},38710:(e,t,n)=>{const r=n(8383);e.exports=r},40564:(e,t,n)=>{const r=n(90149);e.exports=r},44555:(e,t,n)=>{const r=n(97464);e.exports=r},48885:(e,t,n)=>{const r=n(2458);e.exports=r},49533:(e,t,n)=>{var r=n(76401),i=n(75596),l=n(30758);let o="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;var s=o?l.useLayoutEffect:l.useEffect;let a={tag:"history-merge"};t.LexicalComposer=function({initialConfig:e,children:t}){let n=l.useMemo((()=>{const{theme:t,namespace:n,editor__DEPRECATED:l,nodes:s,onError:u,editorState:d,html:c}=e,f=r.createLexicalComposerContext(null,t);let g=l||null;if(null===g){const r=i.createEditor({editable:e.editable,html:c,namespace:n,nodes:s,onError:e=>u(e,r),theme:t});!function(e,t){if(null!==t)if(void 0===t)e.update((()=>{var t=i.$getRoot();if(t.isEmpty()){let n=i.$createParagraphNode();t.append(n),t=o?document.activeElement:null,(null!==i.$getSelection()||null!==t&&t===e.getRootElement())&&n.select()}}),a);else if(null!==t)switch(typeof t){case"string":let n=e.parseEditorState(t);e.setEditorState(n,a);break;case"object":e.setEditorState(t,a);break;case"function":e.update((()=>{i.$getRoot().isEmpty()&&t(e)}),a)}}(r,d),g=r}return[g,f]}),[]);return s((()=>{let t=e.editable,[r]=n;r.setEditable(void 0===t||t)}),[]),l.createElement(r.LexicalComposerContext.Provider,{value:n},t)}},50810:(e,t,n)=>{var r=n(34706),i=n(38710),l=n(87109),o=n(75596);let s="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,a=s&&"documentMode"in document?document.documentMode:null;s&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),s&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);let u=!(!s||!("InputEvent"in window)||a)&&"getTargetRanges"in new window.InputEvent("input"),d=s&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),c=s&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;s&&/Android/.test(navigator.userAgent);let f=s&&/^(?=.*Chrome).*/i.test(navigator.userAgent),g=s&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!f;function h(e,t){t.update((()=>{if(null!==e){let n=e instanceof KeyboardEvent?null:e.clipboardData,i=o.$getSelection();if(null!==i&&null!=n){e.preventDefault();let l=r.$getHtmlContent(t);null!==l&&n.setData("text/html",l),n.setData("text/plain",i.getTextContent())}}}))}t.registerPlainText=function(e){return l.mergeRegister(e.registerCommand(o.DELETE_CHARACTER_COMMAND,(e=>{const t=o.$getSelection();return!!o.$isRangeSelection(t)&&(t.deleteCharacter(e),!0)}),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.DELETE_WORD_COMMAND,(e=>{const t=o.$getSelection();return!!o.$isRangeSelection(t)&&(t.deleteWord(e),!0)}),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.DELETE_LINE_COMMAND,(e=>{const t=o.$getSelection();return!!o.$isRangeSelection(t)&&(t.deleteLine(e),!0)}),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.CONTROLLED_TEXT_INSERTION_COMMAND,(e=>{const t=o.$getSelection();if(!o.$isRangeSelection(t))return!1;if("string"==typeof e)t.insertText(e);else{const n=e.dataTransfer;null!=n?r.$insertDataTransferForPlainText(n,t):(e=e.data)&&t.insertText(e)}return!0}),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.REMOVE_TEXT_COMMAND,(()=>{const e=o.$getSelection();return!!o.$isRangeSelection(e)&&(e.removeText(),!0)}),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.INSERT_LINE_BREAK_COMMAND,(e=>{const t=o.$getSelection();return!!o.$isRangeSelection(t)&&(t.insertLineBreak(e),!0)}),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.INSERT_PARAGRAPH_COMMAND,(()=>{const e=o.$getSelection();return!!o.$isRangeSelection(e)&&(e.insertLineBreak(),!0)}),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.KEY_ARROW_LEFT_COMMAND,(e=>{const t=o.$getSelection();if(!o.$isRangeSelection(t))return!1;const n=e.shiftKey;return!!i.$shouldOverrideDefaultCharacterSelection(t,!0)&&(e.preventDefault(),i.$moveCharacter(t,n,!0),!0)}),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.KEY_ARROW_RIGHT_COMMAND,(e=>{const t=o.$getSelection();if(!o.$isRangeSelection(t))return!1;const n=e.shiftKey;return!!i.$shouldOverrideDefaultCharacterSelection(t,!1)&&(e.preventDefault(),i.$moveCharacter(t,n,!1),!0)}),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.KEY_BACKSPACE_COMMAND,(t=>{const n=o.$getSelection();return!!o.$isRangeSelection(n)&&(t.preventDefault(),e.dispatchCommand(o.DELETE_CHARACTER_COMMAND,!0))}),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.KEY_DELETE_COMMAND,(t=>{const n=o.$getSelection();return!!o.$isRangeSelection(n)&&(t.preventDefault(),e.dispatchCommand(o.DELETE_CHARACTER_COMMAND,!1))}),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.KEY_ENTER_COMMAND,(t=>{const n=o.$getSelection();if(!o.$isRangeSelection(n))return!1;if(null!==t){if((c||d||g)&&u)return!1;t.preventDefault()}return e.dispatchCommand(o.INSERT_LINE_BREAK_COMMAND,!1)}),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.SELECT_ALL_COMMAND,(()=>(o.$selectAll(),!0)),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.COPY_COMMAND,(t=>{const n=o.$getSelection();return!!o.$isRangeSelection(n)&&(h(t,e),!0)}),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.CUT_COMMAND,(t=>{const n=o.$getSelection();return!!o.$isRangeSelection(n)&&(function(e,t){h(e,t),t.update((()=>{let e=o.$getSelection();o.$isRangeSelection(e)&&e.removeText()}))}(t,e),!0)}),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.PASTE_COMMAND,(t=>{const n=o.$getSelection();return!!o.$isRangeSelection(n)&&(function(e,t){e.preventDefault(),t.update((()=>{let t=o.$getSelection(),{clipboardData:n}=e;null!=n&&o.$isRangeSelection(t)&&r.$insertDataTransferForPlainText(n,t)}),{tag:"paste"})}(t,e),!0)}),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.DROP_COMMAND,(e=>{const t=o.$getSelection();return!!o.$isRangeSelection(t)&&(e.preventDefault(),!0)}),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.DRAGSTART_COMMAND,(e=>{const t=o.$getSelection();return!!o.$isRangeSelection(t)&&(e.preventDefault(),!0)}),o.COMMAND_PRIORITY_EDITOR))}},53391:(e,t,n)=>{const r=n(71900);e.exports=r},62572:(e,t,n)=>{const r=n(28749);e.exports=r},63205:(e,t,n)=>{var r=n(76401),i=n(30758),l="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?i.useLayoutEffect:i.useEffect;t.OnChangePlugin=function({ignoreHistoryMergeTagChange:e=!0,ignoreSelectionChange:t=!1,onChange:n}){let[i]=r.useLexicalComposerContext();return l((()=>{if(n)return i.registerUpdateListener((({editorState:r,dirtyElements:l,dirtyLeaves:o,prevEditorState:s,tags:a})=>{t&&0===l.size&&0===o.size||e&&a.has("history-merge")||s.isEmpty()||n(r,i,a)}))}),[i,e,t,n]),null}},69707:(e,t,n)=>{var r=n(3729),i=n(38710),l=n(87109),o=n(75596);function s(e){let t=new URLSearchParams;t.append("code",e);for(let n=1;n<arguments.length;n++)t.append("v",arguments[n]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}let a="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function u(e){let t=o.$getSelection();if(null==t)throw Error("Expected valid LexicalSelection");return o.$isRangeSelection(t)&&t.isCollapsed()||0===t.getNodes().length?"":r.$generateHtmlFromNodes(e,t)}function d(e){let t=o.$getSelection();if(null==t)throw Error("Expected valid LexicalSelection");return o.$isRangeSelection(t)&&t.isCollapsed()||0===t.getNodes().length?null:JSON.stringify(g(e,t))}function c(e,t,n){e.dispatchCommand(o.SELECTION_INSERT_CLIPBOARD_NODES_COMMAND,{nodes:t,selection:n})||n.insertNodes(t)}function f(e,t,n,r=[]){let l=null==t||n.isSelected(t),a=o.$isElementNode(n)&&n.excludeFromCopy("html");var u=n;if(null!==t){var d=i.$cloneWithProperties(n);u=d=o.$isTextNode(d)&&null!=t?i.$sliceSelectedTextNodeContent(t,d):d}let c=o.$isElementNode(u)?u.getChildren():[];var g=u;d=g.exportJSON();var h=g.constructor;for(d.type!==h.getType()&&s(58,h.name),o.$isElementNode(g)&&(Array.isArray(d.children)||s(59,h.name)),o.$isTextNode(u)&&(0<(u=u.__text).length?d.text=u:l=!1),u=0;u<c.length;u++)h=f(e,t,g=c[u],d.children),!l&&o.$isElementNode(n)&&h&&n.extractWithChild(g,t,"clone")&&(l=!0);if(l&&!a)r.push(d);else if(Array.isArray(d.children))for(e=0;e<d.children.length;e++)r.push(d.children[e]);return l}function g(e,t){let n=[],r=o.$getRoot().getChildren();for(let i=0;i<r.length;i++)f(e,t,r[i],n);return{namespace:e._config.namespace,nodes:n}}function h(e){let t=[];for(let n=0;n<e.length;n++){let r=o.$parseSerializedNode(e[n]);o.$isTextNode(r)&&i.$addNodeStyle(r),t.push(r)}return t}let _=null;function p(e,t){var n=a?(e._window||window).getSelection():null;if(!n)return!1;var r=n.anchorNode;if(n=n.focusNode,null!==r&&null!==n&&!o.isSelectionWithinEditor(e,r,n))return!1;if(t.preventDefault(),t=t.clipboardData,r=o.$getSelection(),null===t||null===r)return!1;n=u(e),e=d(e);let i="";return null!==r&&(i=r.getTextContent()),null!==n&&t.setData("text/html",n),null!==e&&t.setData("application/x-lexical-editor",e),t.setData("text/plain",i),!0}t.$generateJSONFromSelectedNodes=g,t.$generateNodesFromSerializedNodes=h,t.$getHtmlContent=u,t.$getLexicalContent=d,t.$insertDataTransferForPlainText=function(e,t){null!=(e=e.getData("text/plain")||e.getData("text/uri-list"))&&t.insertRawText(e)},t.$insertDataTransferForRichText=function(e,t,n){var i=e.getData("application/x-lexical-editor");if(i)try{let e=JSON.parse(i);if(e.namespace===n._config.namespace&&Array.isArray(e.nodes)){return c(n,h(e.nodes),t)}}catch(s){}if(i=e.getData("text/html"))try{var l=(new DOMParser).parseFromString(i,"text/html");return c(n,r.$generateNodesFromDOM(n,l),t)}catch(s){}if(null!=(e=e.getData("text/plain")||e.getData("text/uri-list")))if(o.$isRangeSelection(t))for(""===(e=e.split(/(\r?\n|\t)/))[e.length-1]&&e.pop(),n=0;n<e.length;n++)"\n"===(l=e[n])||"\r\n"===l?t.insertParagraph():"\t"===l?t.insertNodes([o.$createTabNode()]):t.insertText(l);else t.insertRawText(e)},t.$insertGeneratedNodes=c,t.copyToClipboard=async function(e,t){if(null!==_)return!1;if(null!==t)return new Promise((n=>{e.update((()=>{n(p(e,t))}))}));var n=e.getRootElement();let r=null==e._window?window.document:e._window.document,i=a?(e._window||window).getSelection():null;if(null===n||null===i)return!1;let s=r.createElement("span");return s.style.cssText="position: fixed; top: -1000px;",s.append(r.createTextNode("#")),n.append(s),(n=new Range).setStart(s,0),n.setEnd(s,1),i.removeAllRanges(),i.addRange(n),new Promise((t=>{let n=e.registerCommand(o.COPY_COMMAND,(r=>(l.objectKlassEquals(r,ClipboardEvent)&&(n(),null!==_&&(window.clearTimeout(_),_=null),t(p(e,r))),!0)),o.COMMAND_PRIORITY_CRITICAL);_=window.setTimeout((()=>{n(),_=null,t(!1)}),50),r.execCommand("copy"),s.remove()}))}},71900:(e,t,n)=>{var r=n(76401),i=n(40564),l=n(30758);t.createEmptyHistoryState=i.createEmptyHistoryState,t.HistoryPlugin=function({externalHistoryState:e}){let[t]=r.useLexicalComposerContext();return function(e,t,n=1e3){let r=l.useMemo((()=>t||i.createEmptyHistoryState()),[t]);l.useEffect((()=>i.registerHistory(e,r,n)),[n,e,r])}(t,e),null}},73638:(e,t,n)=>{var r=n(38710),i=n(87109),l=n(75596);function o(e,t,n,s=null){let a=null==s||t.isSelected(s),u=l.$isElementNode(t)&&t.excludeFromCopy("html");var d=t;null!==s&&(d=r.$cloneWithProperties(t),d=l.$isTextNode(d)&&null!=s?r.$sliceSelectedTextNodeContent(s,d):d);let c=l.$isElementNode(d)?d.getChildren():[];var f=e._nodes.get(d.getType());f=f&&void 0!==f.exportDOM?f.exportDOM(e,d):d.exportDOM(e);let{element:g,after:h}=f;if(!g)return!1;f=document.createDocumentFragment();for(let r=0;r<c.length;r++){let n=c[r],i=o(e,n,f,s);!a&&l.$isElementNode(t)&&i&&t.extractWithChild(n,s,"html")&&(a=!0)}return a&&!u?(i.isHTMLElement(g)&&g.append(f),n.append(g),h&&(e=h.call(d,g))&&g.replaceWith(e)):n.append(f),a}let s=new Set(["STYLE","SCRIPT"]);function a(e,t,n=new Map,r){let i=[];if(s.has(e.nodeName))return i;let o=null;var u,{nodeName:d}=e,c=t._htmlConversions.get(d.toLowerCase());if(d=null,void 0!==c)for(u of c)null!==(c=u(e))&&(null===d||(d.priority||0)<(c.priority||0))&&(d=c);if(d=(u=null!==d?d.conversion:null)?u(e):null,u=null,null!==d){if(u=d.after,c=d.node,o=Array.isArray(c)?c[c.length-1]:c,null!==o){for(var[,f]of n)if(o=f(o,r),!o)break;o&&i.push(...Array.isArray(c)?c:[o])}null!=d.forChild&&n.set(e.nodeName,d.forChild)}for(e=e.childNodes,r=[],f=0;f<e.length;f++)r.push(...a(e[f],t,new Map(n),o));return null!=u&&(r=u(r)),null==o?i=i.concat(r):l.$isElementNode(o)&&o.append(...r),i}t.$generateHtmlFromNodes=function(e,t){if("undefined"==typeof document||"undefined"==typeof window)throw Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");let n=document.createElement("div"),r=l.$getRoot().getChildren();for(let i=0;i<r.length;i++)o(e,r[i],n,t);return n.innerHTML},t.$generateNodesFromDOM=function(e,t){t=t.body?t.body.childNodes:[];let n=[];for(let i=0;i<t.length;i++){var r=t[i];s.has(r.nodeName)||null!==(r=a(r,e))&&(n=n.concat(r))}return n}},73836:(e,t,n)=>{var r=n(75596);t.registerDragonSupport=function(e){let t=window.location.origin,n=n=>{if(n.origin===t){var i=e.getRootElement();if(document.activeElement===i&&"string"==typeof(i=n.data)){try{var l=JSON.parse(i)}catch(o){return}if(l&&"nuanria_messaging"===l.protocol&&"request"===l.type&&(l=l.payload)&&"makeChanges"===l.functionId&&(l=l.args)){const[t,i,o,s,a]=l;e.update((()=>{const e=r.$getSelection();if(r.$isRangeSelection(e)){var l=e.anchor;let u=l.getNode(),d=0,c=0;r.$isTextNode(u)&&0<=t&&0<=i&&(d=t,c=t+i,e.setTextNodeRange(u,d,u,c)),d===c&&""===o||(e.insertRawText(o),u=l.getNode()),r.$isTextNode(u)&&(d=s,c=s+a,d=d>(l=u.getTextContentSize())?l:d,c=c>l?l:c,e.setTextNodeRange(u,d,u,c)),n.stopImmediatePropagation()}}))}}}};return window.addEventListener("message",n,!0),()=>{window.removeEventListener("message",n,!0)}}},75596:(e,t,n)=>{const r=n(19277);e.exports=r},76401:(e,t,n)=>{const r=n(26406);e.exports=r},80681:(e,t,n)=>{const r=n(23918);e.exports=r},85855:(e,t,n)=>{const r=n(73836);e.exports=r},87109:(e,t,n)=>{const r=n(17674);e.exports=r},90149:(e,t,n)=>{var r=n(87109),i=n(75596);function l(e,t){let n=Date.now(),r=0;return(l,o,s,a,u,d)=>{let c=Date.now();if(d.has("historic"))return r=0,n=c,2;let f=function(e,t,n,r,l){if(null===e||0===n.size&&0===r.size&&!l)return 0;var o=t._selection,s=e._selection;if(l)return 1;if(!(i.$isRangeSelection(o)&&i.$isRangeSelection(s)&&s.isCollapsed()&&o.isCollapsed()))return 0;l=t._nodeMap;let a=[];for(let i of n)void 0!==(n=l.get(i))&&a.push(n);for(let[u,d]of r)d&&(void 0===(r=l.get(u))||i.$isRootNode(r)||a.push(r));return 0===a.length?0:1<a.length?(t=(r=t._nodeMap).get(o.anchor.key),s=r.get(s.anchor.key),t&&s&&!e._nodeMap.has(t.__key)&&i.$isTextNode(t)&&1===t.__text.length&&1===o.anchor.offset?2:0):(t=a[0],e=e._nodeMap.get(t.__key),i.$isTextNode(e)&&i.$isTextNode(t)&&e.__mode===t.__mode?(e=e.__text)===(t=t.__text)?0:(o=o.anchor,s=s.anchor,o.key!==s.key||"text"!==o.type?0:(o=o.offset,s=s.offset,1==(e=t.length-e.length)&&s===o-1?2:-1===e&&s===o+1?3:-1===e&&s===o?4:0)):0)}(l,o,a,u,e.isComposing()),g=(()=>{var g=null===s||s.editor===e,h=d.has("history-push");if(!h&&g&&d.has("history-merge"))return 0;if(null===l)return 1;var _=o._selection;if(!(0<a.size||0<u.size))return null!==_?0:2;if(!1===h&&0!==f&&f===r&&c<n+t&&g)return 0;if(1===a.size){{h=Array.from(a)[0],g=l._nodeMap.get(h),h=o._nodeMap.get(h),_=l._selection;let e=o._selection,t=!1;i.$isRangeSelection(_)&&i.$isRangeSelection(e)&&(t="element"===_.anchor.type&&"element"===_.focus.type&&"text"===e.anchor.type&&"text"===e.focus.type),g=!(t||!i.$isTextNode(g)||!i.$isTextNode(h))&&(g.__type===h.__type&&g.__text===h.__text&&g.__mode===h.__mode&&g.__detail===h.__detail&&g.__style===h.__style&&g.__format===h.__format&&g.__parent===h.__parent)}if(g)return 0}return 1})();return n=c,r=f,g}}t.createEmptyHistoryState=function(){return{current:null,redoStack:[],undoStack:[]}},t.registerHistory=function(e,t,n){let o=l(e,n);n=({editorState:n,prevEditorState:r,dirtyLeaves:l,dirtyElements:s,tags:a})=>{const u=t.current,d=t.redoStack,c=t.undoStack,f=null===u?null:u.editorState;if(null===u||n!==f){if(1===(r=o(r,n,u,l,s,a)))0!==d.length&&(t.redoStack=[],e.dispatchCommand(i.CAN_REDO_COMMAND,!1)),null!==u&&(c.push({...u}),e.dispatchCommand(i.CAN_UNDO_COMMAND,!0));else if(2===r)return;t.current={editor:e,editorState:n}}};let s=r.mergeRegister(e.registerCommand(i.UNDO_COMMAND,(()=>{let n=t.redoStack,r=t.undoStack;if(0!==r.length){let l=t.current,o=r.pop();null!==l&&(n.push(l),e.dispatchCommand(i.CAN_REDO_COMMAND,!0)),0===r.length&&e.dispatchCommand(i.CAN_UNDO_COMMAND,!1),t.current=o||null,o&&o.editor.setEditorState(o.editorState,{tag:"historic"})}return!0}),i.COMMAND_PRIORITY_EDITOR),e.registerCommand(i.REDO_COMMAND,(()=>{let n=t.redoStack;var r=t.undoStack;if(0!==n.length){let l=t.current;null!==l&&(r.push(l),e.dispatchCommand(i.CAN_UNDO_COMMAND,!0)),r=n.pop(),0===n.length&&e.dispatchCommand(i.CAN_REDO_COMMAND,!1),t.current=r||null,r&&r.editor.setEditorState(r.editorState,{tag:"historic"})}return!0}),i.COMMAND_PRIORITY_EDITOR),e.registerCommand(i.CLEAR_EDITOR_COMMAND,(()=>(t.undoStack=[],t.redoStack=[],t.current=null,!1)),i.COMMAND_PRIORITY_EDITOR),e.registerCommand(i.CLEAR_HISTORY_COMMAND,(()=>(t.undoStack=[],t.redoStack=[],t.current=null,e.dispatchCommand(i.CAN_REDO_COMMAND,!1),e.dispatchCommand(i.CAN_UNDO_COMMAND,!1),!0)),i.COMMAND_PRIORITY_EDITOR),e.registerUpdateListener(n)),a=e.registerUpdateListener(n);return()=>{s(),a()}}},94444:(e,t,n)=>{const r=n(95085);e.exports=r},95085:(e,t,n)=>{var r=n(30758);function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var l={error:null},o=function(e){function t(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state=l,t.resetErrorBoundary=function(){for(var e,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];null==t.props.onReset||(e=t.props).onReset.apply(e,r),t.reset()},t}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)}(t,e),t.getDerivedStateFromError=function(e){return{error:e}};var n=t.prototype;return n.reset=function(){this.setState(l)},n.componentDidCatch=function(e,t){var n,r;null==(n=(r=this.props).onError)||n.call(r,e,t)},n.componentDidUpdate=function(e,t){var n,r,i=this.props.resetKeys;null!==this.state.error&&null!==t.error&&function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=[]),e.length!==t.length||e.some((function(e,n){return!Object.is(e,t[n])}))}(e.resetKeys,i)&&(null==(n=(r=this.props).onResetKeysChange)||n.call(r,e.resetKeys,i),this.reset())},n.render=function(){var e=this.state.error,t=this.props,n=t.fallbackRender,i=t.FallbackComponent;if(t=t.fallback,null!==e){if(e={error:e,resetErrorBoundary:this.resetErrorBoundary},r.isValidElement(t))return t;if("function"==typeof n)return n(e);if(i)return r.createElement(i,e);throw Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},t}(r.Component);e.exports=function({children:e,onError:t}){return r.createElement(o,{fallback:r.createElement("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"}},"An error was thrown."),onError:t},e)}},97372:(e,t,n)=>{const r=n(49533);e.exports=r},97464:(e,t,n)=>{var r=n(75596);function i(e,t=!0){return!e&&(e=l(),t&&(e=e.trim()),""===e)}function l(){return r.$getRoot().getTextContent()}function o(e){if(!i(e,!1))return!1;let t=(e=r.$getRoot().getChildren()).length;if(1<t)return!1;for(let i=0;i<t;i++){var n=e[i];if(r.$isDecoratorNode(n))return!1;if(r.$isElementNode(n)){if(!r.$isParagraphNode(n)||0!==n.__indent)return!1;let e=(n=n.getChildren()).length;for(let t=0;t<e;t++)if(!r.$isTextNode(n[i]))return!1}}return!0}t.$canShowPlaceholder=o,t.$canShowPlaceholderCurry=function(e){return()=>o(e)},t.$findTextIntersectionFromCharacters=function(e,t){var n=e.getFirstChild();e=0;e:for(;null!==n;){if(r.$isElementNode(n)){var i=n.getFirstChild();if(null!==i){n=i;continue}}else if(r.$isTextNode(n)){if(e+(i=n.getTextContentSize())>t)return{node:n,offset:t-e};e+=i}if(null===(i=n.getNextSibling())){for(n=n.getParent();null!==n;){if(null!==(i=n.getNextSibling())){n=i;continue e}n=n.getParent()}break}n=i}return null},t.$isRootTextContentEmpty=i,t.$isRootTextContentEmptyCurry=function(e,t){return()=>i(e,t)},t.$rootTextContent=l,t.registerLexicalTextEntity=function(e,t,n,i){let l=e=>{const t=r.$createTextNode(e.getTextContent());t.setFormat(e.getFormat()),e.replace(t)};return[e.registerNodeTransform(r.TextNode,(e=>{if(e.isSimpleText()){var o=e.getPreviousSibling(),s=e.getTextContent(),a=e;if(r.$isTextNode(o)){var u=o.getTextContent(),d=t(u+s);if(o instanceof n){if(null===d||0!==o.getLatest().__mode)return void l(o);if(0<(d=d.end-u.length))return a=u+(a=s.slice(0,d)),o.select(),o.setTextContent(a),void(d===s.length?e.remove():(o=s.slice(d),e.setTextContent(o)))}else if(null===d||d.start<u.length)return}for(;;){if(s=d=null===(e=t(s))?"":s.slice(e.end),""===d){if(u=a.getNextSibling(),r.$isTextNode(u)){if(d=a.getTextContent()+u.getTextContent(),null===(d=t(d))){u instanceof n?l(u):u.markDirty();break}if(0!==d.start)break}}else if(null!==(u=t(d))&&0===u.start)break;if(null===e)break;if(0===e.start&&r.$isTextNode(o)&&o.isTextEntity())continue;let c;if(0===e.start?[c,a]=a.splitText(e.end):[,c,a]=a.splitText(e.start,e.end),(e=i(c)).setFormat(c.getFormat()),c.replace(e),null==a)break}}})),e=e.registerNodeTransform(n,(e=>{var i=e.getTextContent();const o=t(i);null===o||0!==o.start?l(e):i.length>o.end?e.splitText(o.end):(i=e.getPreviousSibling(),r.$isTextNode(i)&&i.isTextEntity()&&(l(i),l(e)),i=e.getNextSibling(),r.$isTextNode(i)&&i.isTextEntity()&&(l(i),e instanceof n&&l(e)))}))]}}}]);