"use strict";(self.webpackChunkwei=self.webpackChunkwei||[]).push([[3406],{46660:(e,n,t)=>{t.r(n),t.d(n,{default:()=>y});var r=t(30758),a=t(43319),i=t(78910),c=t(60646),u=t(95822),o=t(79443),s=t(95527),l=t(54817),d=t(85968),f=t(81168),x=t(86066),p=t(34519),h=t(86e3),A=t(98707),v=t(48366),j=t(6316),m=t(86070);const g=(0,j.A)((0,m.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),k=(0,j.A)((0,m.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");const w=function(){var e=(0,r.useState)([]),n=e[0],a=e[1],j=(0,r.useState)(""),w=j[0],b=j[1],y=(0,r.useState)(null),C=y[0],S=y[1],D=(0,r.useState)(""),I=D[0],M=D[1],z=(0,r.useState)(null),F=z[0],O=z[1];(0,r.useEffect)((function(){Promise.all([t.e(4023),t.e(9834)]).then(t.bind(t,79834)).then(function(){var e=(0,c.A)((0,i.A)().mark((function e(n){var t,r,c,u;return(0,i.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.default,r=n.connectMongo,c=new t,e.next=5,r(c);case 5:return O(c),e.next=8,c.todos.toArray();case 8:u=e.sent,a(u);case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}),[]);var H=function(){var e=(0,c.A)((0,i.A)().mark((function e(){var n,t,r;return(0,i.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===w.trim()){e.next=9;break}return n=(new Date).toISOString(),t={text:w,completed:!1,createdAt:n,updatedAt:n},e.next=5,F.todos.add(t);case 5:r=e.sent,t.id=r,a((function(e){return[].concat(e,[t])})),b("");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=(0,c.A)((0,i.A)().mark((function e(t){var r,c;return(0,i.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1===(r=n.findIndex((function(e){return e.id===t})))){e.next=8;break}return(c=[].concat(n))[r].completed=!c[r].completed,c[r].updatedAt=(new Date).toISOString(),e.next=7,F.todos.update(t,c[r]);case 7:a(c);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),E=function(){var e=(0,c.A)((0,i.A)().mark((function e(n){return(0,i.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.todos.delete(n);case 2:a((function(e){return e.filter((function(e){return e.id!==n}))}));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),L=function(){var e=(0,c.A)((0,i.A)().mark((function e(t){var r,c;return(0,i.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1===(r=n.findIndex((function(e){return e.id===t})))){e.next=9;break}return(c=[].concat(n))[r].text=I,c[r].updatedAt=(new Date).toISOString(),e.next=7,F.todos.update(t,c[r]);case 7:a(c),S(null);case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,m.jsxs)("div",{children:[(0,m.jsx)(u.A,{label:"\u6dfb\u52a0\u65b0\u4efb\u52a1",value:w,onChange:function(e){return b(e.target.value)},margin:"normal",variant:"outlined",fullWidth:!0}),(0,m.jsx)(o.A,{onClick:H,variant:"contained",color:"primary",children:"\u6dfb\u52a0"}),(0,m.jsx)(s.A,{children:n.map((function(e){return(0,m.jsx)(l.Ay,{children:C===(null==e?void 0:e.id)?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(u.A,{value:I,onChange:function(e){return M(e.target.value)},fullWidth:!0,variant:"standard"}),(0,m.jsx)(d.A,{edge:"end","aria-label":"save",onClick:function(){return L(e.id)},children:(0,m.jsx)(v.A,{})}),(0,m.jsx)(d.A,{edge:"end","aria-label":"cancel",onClick:function(){return S(null)},children:(0,m.jsx)(k,{})})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(f.A,{primary:e.text,secondary:"\u521b\u5efa\u65f6\u95f4: "+e.createdAt+", \u4fee\u6539\u65f6\u95f4: "+e.updatedAt,style:{textDecoration:e.completed?"line-through":"none"}}),(0,m.jsx)(d.A,{edge:"end","aria-label":"edit",onClick:function(){return n=null==e?void 0:e.id,t=e.text,S(n||""),void M(t);var n,t},children:(0,m.jsx)(A.A,{})}),(0,m.jsx)(d.A,{edge:"end","aria-label":"delete",onClick:function(){return E(null==e?void 0:e.id)},children:(0,m.jsx)(h.A,{})}),(0,m.jsxs)(x.A,{value:null!=e&&e.completed?"completed":"incomplete",exclusive:!0,onChange:function(){return W(null==e?void 0:e.id)},children:[(0,m.jsx)(p.A,{value:"completed",children:(0,m.jsx)(g,{})}),(0,m.jsx)(p.A,{value:"incomplete",children:(0,m.jsx)(k,{})})]})]})},e.id)}))})]})};var b=function(){return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(w,{})})};function y(){return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(a.A,Object.assign({},C)),(0,m.jsx)(b,{})]})}var C={title:"\u5f85\u505a\u4e8b\u9879",description:"\u5f85\u505a\u4e8b\u9879",keyword:"\u5f85\u505a\u4e8b\u9879"}},86e3:(e,n,t)=>{t.d(n,{A:()=>i});var r=t(6316),a=t(86070);const i=(0,r.A)((0,a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")}}]);