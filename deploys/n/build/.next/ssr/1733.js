"use strict";exports.id=1733,exports.ids=[1733],exports.modules={41733:(t,e,r)=>{r.r(e),r.d(e,{JSONPath:()=>o,SafeScript:()=>c});var a=r(40371);let{hasOwnProperty:l}=Object.prototype;function n(t,e){return(t=t.slice()).push(e),t}function i(t,e){return(e=e.slice()).unshift(t),e}class s extends Error{constructor(t){super('JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)'),this.avoidNew=!0,this.value=t,this.name="NewError"}}function o(t,e,r,a,n){if(!(this instanceof o))try{return new o(t,e,r,a,n)}catch(t){if(!t.avoidNew)throw t;return t.value}"string"==typeof t&&(n=a,a=r,r=e,e=t,t=null);let i=t&&"object"==typeof t;if(t=t||{},this.json=t.json||r,this.path=t.path||e,this.resultType=t.resultType||"value",this.flatten=t.flatten||!1,this.wrap=!l.call(t,"wrap")||t.wrap,this.sandbox=t.sandbox||{},this.eval=void 0===t.eval?"safe":t.eval,this.ignoreEvalErrors=void 0!==t.ignoreEvalErrors&&t.ignoreEvalErrors,this.parent=t.parent||null,this.parentProperty=t.parentProperty||null,this.callback=t.callback||a||null,this.otherTypeCallback=t.otherTypeCallback||n||function(){throw TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},!1!==t.autostart){let a={path:i?t.path:e};i?"json"in t&&(a.json=t.json):a.json=r;let l=this.evaluate(a);if(!l||"object"!=typeof l)throw new s(l);return l}}o.prototype.evaluate=function(t,e,r,a){let n=this.parent,i=this.parentProperty,{flatten:s,wrap:c}=this;if(this.currResultType=this.resultType,this.currEval=this.eval,this.currSandbox=this.sandbox,r=r||this.callback,this.currOtherTypeCallback=a||this.otherTypeCallback,e=e||this.json,(t=t||this.path)&&"object"==typeof t&&!Array.isArray(t)){if(!t.path&&""!==t.path)throw TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!l.call(t,"json"))throw TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');({json:e}=t),s=l.call(t,"flatten")?t.flatten:s,this.currResultType=l.call(t,"resultType")?t.resultType:this.currResultType,this.currSandbox=l.call(t,"sandbox")?t.sandbox:this.currSandbox,c=l.call(t,"wrap")?t.wrap:c,this.currEval=l.call(t,"eval")?t.eval:this.currEval,r=l.call(t,"callback")?t.callback:r,this.currOtherTypeCallback=l.call(t,"otherTypeCallback")?t.otherTypeCallback:this.currOtherTypeCallback,n=l.call(t,"parent")?t.parent:n,i=l.call(t,"parentProperty")?t.parentProperty:i,t=t.path}if(n=n||null,i=i||null,Array.isArray(t)&&(t=o.toPathString(t)),!t&&""!==t||!e)return;let p=o.toPathArray(t);"$"===p[0]&&p.length>1&&p.shift(),this._hasParentSelector=null;let h=this._trace(p,e,["$"],n,i,r).filter(function(t){return t&&!t.isParentSelector});return h.length?c||1!==h.length||h[0].hasArrExpr?h.reduce((t,e)=>{let r=this._getPreferredOutput(e);return s&&Array.isArray(r)?t=t.concat(r):t.push(r),t},[]):this._getPreferredOutput(h[0]):c?[]:void 0},o.prototype._getPreferredOutput=function(t){let e=this.currResultType;switch(e){case"all":{let e=Array.isArray(t.path)?t.path:o.toPathArray(t.path);return t.pointer=o.toPointer(e),t.path="string"==typeof t.path?t.path:o.toPathString(t.path),t}case"value":case"parent":case"parentProperty":return t[e];case"path":return o.toPathString(t[e]);case"pointer":return o.toPointer(t.path);default:throw TypeError("Unknown result type")}},o.prototype._handleCallback=function(t,e,r){if(e){let a=this._getPreferredOutput(t);t.path="string"==typeof t.path?t.path:o.toPathString(t.path),e(a,r,t)}},o.prototype._trace=function(t,e,r,a,s,o,c,p){let h;if(!t.length)return h={path:r,value:e,parent:a,parentProperty:s,hasArrExpr:c},this._handleCallback(h,o,"value"),h;let u=t[0],f=t.slice(1),y=[];function b(t){Array.isArray(t)?t.forEach(t=>{y.push(t)}):y.push(t)}if(("string"!=typeof u||p)&&e&&l.call(e,u))b(this._trace(f,e[u],n(r,u),e,u,o,c));else if("*"===u)this._walk(e,t=>{b(this._trace(f,e[t],n(r,t),e,t,o,!0,!0))});else if(".."===u)b(this._trace(f,e,r,a,s,o,c)),this._walk(e,a=>{"object"==typeof e[a]&&b(this._trace(t.slice(),e[a],n(r,a),e,a,o,!0))});else if("^"===u)return this._hasParentSelector=!0,{path:r.slice(0,-1),expr:f,isParentSelector:!0};else if("~"===u)return h={path:n(r,u),value:s,parent:a,parentProperty:null},this._handleCallback(h,o,"property"),h;else if("$"===u)b(this._trace(f,e,r,null,null,o,c));else if(/^(-?\d*):(-?\d*):?(\d*)$/u.test(u))b(this._slice(u,f,e,r,a,s,o));else if(0===u.indexOf("?(")){if(!1===this.currEval)throw Error("Eval [?(expr)] prevented in JSONPath expression.");let t=u.replace(/^\?\((.*?)\)$/u,"$1"),l=/@.?([^?]*)[['](\??\(.*?\))(?!.\)\])[\]']/gu.exec(t);l?this._walk(e,t=>{let i=[l[2]],c=l[1]?e[t][l[1]]:e[t];this._trace(i,c,r,a,s,o,!0).length>0&&b(this._trace(f,e[t],n(r,t),e,t,o,!0))}):this._walk(e,l=>{this._eval(t,e[l],l,r,a,s)&&b(this._trace(f,e[l],n(r,l),e,l,o,!0))})}else if("("===u[0]){if(!1===this.currEval)throw Error("Eval [(expr)] prevented in JSONPath expression.");b(this._trace(i(this._eval(u,e,r[r.length-1],r.slice(0,-1),a,s),f),e,r,a,s,o,c))}else if("@"===u[0]){let t=!1,l=u.slice(1,-2);switch(l){case"scalar":e&&["object","function"].includes(typeof e)||(t=!0);break;case"boolean":case"string":case"undefined":case"function":typeof e===l&&(t=!0);break;case"integer":Number.isFinite(e)&&!(e%1)&&(t=!0);break;case"number":Number.isFinite(e)&&(t=!0);break;case"nonFinite":"number"!=typeof e||Number.isFinite(e)||(t=!0);break;case"object":e&&typeof e===l&&(t=!0);break;case"array":Array.isArray(e)&&(t=!0);break;case"other":t=this.currOtherTypeCallback(e,r,a,s);break;case"null":null===e&&(t=!0);break;default:throw TypeError("Unknown value type "+l)}if(t)return h={path:r,value:e,parent:a,parentProperty:s},this._handleCallback(h,o,"value"),h}else if("`"===u[0]&&e&&l.call(e,u.slice(1))){let t=u.slice(1);b(this._trace(f,e[t],n(r,t),e,t,o,c,!0))}else if(u.includes(","))for(let t of u.split(","))b(this._trace(i(t,f),e,r,a,s,o,!0));else!p&&e&&l.call(e,u)&&b(this._trace(f,e[u],n(r,u),e,u,o,c,!0));if(this._hasParentSelector)for(let t=0;t<y.length;t++){let r=y[t];if(r&&r.isParentSelector){let l=this._trace(r.expr,e,r.path,a,s,o,c);if(Array.isArray(l)){y[t]=l[0];let e=l.length;for(let r=1;r<e;r++)t++,y.splice(t,0,l[r])}else y[t]=l}}return y},o.prototype._walk=function(t,e){if(Array.isArray(t)){let r=t.length;for(let t=0;t<r;t++)e(t)}else t&&"object"==typeof t&&Object.keys(t).forEach(t=>{e(t)})},o.prototype._slice=function(t,e,r,a,l,n,s){if(!Array.isArray(r))return;let o=r.length,c=t.split(":"),p=c[2]&&Number.parseInt(c[2])||1,h=c[0]&&Number.parseInt(c[0])||0,u=c[1]&&Number.parseInt(c[1])||o;h=h<0?Math.max(0,h+o):Math.min(o,h),u=u<0?Math.max(0,u+o):Math.min(o,u);let f=[];for(let t=h;t<u;t+=p)this._trace(i(t,e),r,a,l,n,s,!0).forEach(t=>{f.push(t)});return f},o.prototype._eval=function(t,e,r,a,n,i){this.currSandbox._$_parentProperty=i,this.currSandbox._$_parent=n,this.currSandbox._$_property=r,this.currSandbox._$_root=this.json,this.currSandbox._$_v=e;let s=t.includes("@path");s&&(this.currSandbox._$_path=o.toPathString(a.concat([r])));let c=this.currEval+"Script:"+t;if(!o.cache[c]){let e=t.replace(/@parentProperty/gu,"_$_parentProperty").replace(/@parent/gu,"_$_parent").replace(/@property/gu,"_$_property").replace(/@root/gu,"_$_root").replace(/@([.\s)[])/gu,"_$_v$1");if(s&&(e=e.replace(/@path/gu,"_$_path")),"safe"===this.currEval||!0===this.currEval||void 0===this.currEval)o.cache[c]=new this.safeVm.Script(e);else if("native"===this.currEval)o.cache[c]=new this.vm.Script(e);else if("function"==typeof this.currEval&&this.currEval.prototype&&l.call(this.currEval.prototype,"runInNewContext")){let t=this.currEval;o.cache[c]=new t(e)}else if("function"==typeof this.currEval)o.cache[c]={runInNewContext:t=>this.currEval(e,t)};else throw TypeError(`Unknown "eval" property "${this.currEval}"`)}try{return o.cache[c].runInNewContext(this.currSandbox)}catch(e){if(this.ignoreEvalErrors)return!1;throw Error("jsonPath: "+e.message+": "+t)}},o.cache={},o.toPathString=function(t){let e=t.length,r="$";for(let a=1;a<e;a++)/^(~|\^|@.*?\(\))$/u.test(t[a])||(r+=/^[0-9*]+$/u.test(t[a])?"["+t[a]+"]":"['"+t[a]+"']");return r},o.toPointer=function(t){let e=t.length,r="";for(let a=1;a<e;a++)/^(~|\^|@.*?\(\))$/u.test(t[a])||(r+="/"+t[a].toString().replace(/~/gu,"~0").replace(/\//gu,"~1"));return r},o.toPathArray=function(t){let{cache:e}=o;if(e[t])return e[t].concat();let r=[],a=t.replace(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/gu,";$&;").replace(/[['](\??\(.*?\))[\]'](?!.\])/gu,function(t,e){return"[#"+(r.push(e)-1)+"]"}).replace(/\[['"]([^'\]]*)['"]\]/gu,function(t,e){return"['"+e.replace(/\./gu,"%@%").replace(/~/gu,"%%@@%%")+"']"}).replace(/~/gu,";~;").replace(/['"]?\.['"]?(?![^[]*\])|\[['"]?/gu,";").replace(/%@%/gu,".").replace(/%%@@%%/gu,"~").replace(/(?:;)?(\^+)(?:;)?/gu,function(t,e){return";"+e.split("").join(";")+";"}).replace(/;;;|;;/gu,";..;").replace(/;$|'?\]|'$/gu,"").split(";").map(function(t){let e=t.match(/#(\d+)/u);return e&&e[1]?r[e[1]]:t});return e[t]=a,e[t].concat()},o.prototype.vm=a,o.prototype.safeVm=a;let c=a.Script}};