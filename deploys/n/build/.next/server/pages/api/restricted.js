"use strict";(()=>{var e={};e.id=7708,e.ids=[7708],e.modules={65542:e=>{e.exports=require("next-auth")},75600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},55511:e=>{e.exports=require("crypto")},23003:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},43578:(e,t,r)=>{r.r(t),r.d(t,{config:()=>d,default:()=>u,routeModule:()=>f});var n={};r.r(n),r.d(n,{default:()=>c});var i=r(93772),s=r(25395),o=r(23003);let a=require("next-auth/next");var l=r(79187);let c=async(e,t)=>{await (0,a.getServerSession)(e,t,l.default)?t.send({content:"This is protected content. You can access this content because you are signed in."}):t.send({error:"You must be signed in to view the protected content on this page."})},u=(0,o.M)(n,"default"),d=(0,o.M)(n,"config"),f=new i.PagesAPIRouteModule({definition:{kind:s.A.PAGES_API,page:"/api/restricted",pathname:"/api/restricted",bundlePath:"",filename:""},userland:n})},79187:(e,t,r)=>{r.r(t),r.d(t,{authOptions:()=>S,default:()=>E});var n=r(65542),i=r.n(n);let s=require("next-auth/providers/credentials");var o=r.n(s);let a=require("next-auth/providers/github");var l=r.n(a),c=r(55511),u=r.n(c);let d={randomUUID:u().randomUUID},f=new Uint8Array(256),p=f.length,y=[];for(let e=0;e<256;++e)y.push((e+256).toString(16).slice(1));let h=function(e,t,r){if(d.randomUUID&&!t&&!e)return d.randomUUID();let n=(e=e||{}).random||(e.rng||function(){return p>f.length-16&&(u().randomFillSync(f),p=0),f.slice(p,p+=16)})();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return function(e,t=0){return y[e[t+0]]+y[e[t+1]]+y[e[t+2]]+y[e[t+3]]+"-"+y[e[t+4]]+y[e[t+5]]+"-"+y[e[t+6]]+y[e[t+7]]+"-"+y[e[t+8]]+y[e[t+9]]+"-"+y[e[t+10]]+y[e[t+11]]+y[e[t+12]]+y[e[t+13]]+y[e[t+14]]+y[e[t+15]]}(n)};async function g(e){if(!(e instanceof Response))throw TypeError("Expected a Response object");if(!e.ok)throw Error("Something went wrong");let t=e.headers.get("content-type");return t&&t.includes("application/json")?await e.json():await e.text()}var m=r(80751);let S={providers:[l()({clientId:process.env.GITHUB_ID||"",clientSecret:process.env.GITHUB_SECRET||""}),o()({name:"Credentials",credentials:{username:{label:"Username",type:"text"},email:{label:"Email",type:"email"},password:{label:"Password",type:"password"},JSESSIONID:{label:"JSESSIONID",type:"text"}},authorize:async e=>{if(!e)return null;let{username:t,JSESSIONID:r}=e;if(!r)throw TypeError("no Credentials");let n=await fetch("http://qio:89/jc/web/filter/sys_user/toUpdatePassword.action",{headers:{cookie:`JSESSIONID=${r}`},referrer:"http://xxx"}),i=await g(n);if("string"==typeof(i=m.Ay.core(i,"loginIp","userPassword")))throw TypeError("need signin");return{id:h(),username:t,JSESSIONID:r,...i}}})],session:{strategy:"jwt",maxAge:2592e3},callbacks:{session:async({session:e,token:t})=>(e.user={...e.user,id:t.id,jsessionid:t.jsessionid,role:t.role||"guest",...t},e),async jwt({token:e,user:t,req:r}){if(t&&(e.id=t.id,e.jsessionid=t.JSESSIONID,e.role=t.role||"guest",Object.assign(e,t)),!e.browserId&&r){let t=r.cookies.BrowserId||r.cookies.JSESSIONID||h();e.browserId=t}return e}},jwt:{secret:process.env.NEXTAUTH_SECRET},pages:{signIn:"/SignIn"},secret:process.env.NEXTAUTH_SECRET},E=i()(S)},80751:(e,t,r)=>{r.d(t,{Ay:()=>n,RA:()=>o});class n extends String{static{this.removeEmptyValues=i}static{this.removeKeys=s}static{this.getFirstMatchingValue=o}static core(e,...t){return s(i(e),...t)}}function i(e,t){try{let r=e;t="boolean"==typeof t?t:"string"==typeof t||"object"!=typeof t&&"string"==typeof e,"string"==typeof e&&(r=JSON.parse(e));let n=e=>Array.isArray(e)?e.map(e=>n(e)).filter(e=>null!=e&&!("object"==typeof e&&0===Object.keys(e).length)):"object"==typeof e&&null!==e?Object.entries(e).map(([e,t])=>[e,n(t)]).reduce((e,[t,r])=>(null==r||"object"==typeof r&&0===Object.keys(r).length||(e[t]=r),e),{}):e,i=n(r);return t?JSON.stringify(i):i}catch(e){console.warn("Error in removeEmptyValues:",e.message||e);return}}function s(e,...t){try{let r=Array.isArray(t[0])?t[0]:t,n=RegExp(`${r.join("|")}$`),i=e;"string"==typeof e&&(i=JSON.parse(e));let s=(e,t)=>Array.isArray(e)?e.map(e=>s(e,t)):"object"==typeof e&&null!==e?Object.entries(e).filter(([e])=>!t.test(e)).reduce((e,[r,n])=>(e[r]=s(n,t),e),{}):e,o=s(i,n);return"string"==typeof e?JSON.stringify(o):o}catch(e){console.warn("Error in removeKeys:",e.message||e);return}}function o(e,...t){if("string"==typeof e&&/^\s*(?:{.+?}|\[.+?\])\s*$/.test(e))try{e=JSON.parse(e)}catch(e){}let r=Object.assign({},e),n=t.map(e=>e&&("string"==typeof e||e instanceof RegExp)?void 0:null),i=(e,...t)=>{if(e&&!(t.length<1)){for(let r in e)if(e.hasOwnProperty(r)&&(t.forEach((t,i)=>{if(void 0===n[i]&&("string"==typeof t&&t===r||t instanceof RegExp&&t.test(r))){let t=e[r];if(n[i]=void 0===t?null:t,!n.includes(void 0))return}}),"object"==typeof e[r]&&null!==e[r]&&(i(e[r],...t),!n.includes(void 0))))return}};return i(r,...t),n.length>0?1===n.length?n[0]:n:void 0}},25395:(e,t)=>{var r;Object.defineProperty(t,"A",{enumerable:!0,get:function(){return r}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(r||(r={}))},93772:(e,t,r)=>{e.exports=r(75600)},72882:()=>{"undefined"!=typeof module&&(globalThis.entryChunkCache=globalThis.entryChunkCache||new Set,module.filename&&globalThis.entryChunkCache.add(module.filename),module.children&&module.children.forEach(function(e){e.filename&&globalThis.entryChunkCache.add(e.filename)}))}};var t=require("../../webpack-api-runtime.js");t.C(e);var r=e=>t(t.s=e),n=Promise.all([t.f.consumes||function(e,t){},t.f.remotes||function(e,t){}].reduce((e,t)=>(t("7708",e),e),[])).then(()=>t.X(0,[8910],()=>(r(72882),r(43578))));module.exports=n})();